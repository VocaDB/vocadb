/*
jQWidgets v2.7.0 (2013-Feb-08)
Copyright (c) 2011-2013 jQWidgets.
License: http://jqwidgets.com/license/
*/

(function(a){a.jqx.jqxWidget("jqxChart","",{});a.extend(a.jqx._jqxChart.prototype,{createInstance:function(d){if(!a.jqx.dataAdapter){throw"jqxdata.js is not loaded";return}this._refreshOnDownloadComlete();var c=this;this.host.on("mousemove",function(f){if(c.enabled==false){return}f.preventDefault();var e=f.pageX||f.clientX||f.screenX;var h=f.pageY||f.clientY||f.screenY;var g=c.host.offset();e-=g.left;h-=g.top;c.onmousemove(e,h)});this.host.on("mouseleave",function(e){if(c.enabled==false){return}c._cancelTooltipTimer();c._hideToolTip()});this.host.on("click",function(f){if(c.enabled==false){return}c._cancelTooltipTimer();c._hideToolTip();if(c._pointMarker&&c._pointMarker.element){var g=c.seriesGroups[c._pointMarker.gidx];var e=g.series[c._pointMarker.sidx];c._raiseEvent("click",g,e,c._pointMarker.iidx)}});if(this.element.style){var b=false;if(this.element.style.width!=null){b|=this.element.style.width.toString().indexOf("%")!=-1}if(this.element.style.height!=null){b|=this.element.style.height.toString().indexOf("%")!=-1}if(b){a(window).resize(function(){if(c.timer){clearTimeout(c.timer)}var e=a.jqx.browser.msie?200:1;c.timer=setTimeout(function(){var f=c.enableAnimations;c.enableAnimations=false;c.refresh();c.enableAnimations=f},e)})}}},_refreshOnDownloadComlete:function(){if(this.source instanceof a.jqx.dataAdapter){var c=this;var d=this.source._options;if(d==undefined||(d!=undefined&&!d.autoBind)){this.source.autoSync=false;this.source.dataBind()}if(this.source.records.length==0){var b=function(){if(c.ready){c.ready()}c.refresh()};this.source.unbindDownloadComplete(this.element.id);this.source.bindDownloadComplete(this.element.id,b)}else{if(c.ready){c.ready()}}this.source.unbindBindingUpdate(this.element.id);this.source.bindBindingUpdate(this.element.id,function(){c.refresh()})}},defineInstance:function(){this.source=new Array();this.seriesGroups=new Array();this.categoryAxis={}},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false){return}if(c=="source"){this._refreshOnDownloadComlete()}this.refresh()},_internalRefresh:function(){this._stopAnimations();this.host.empty();this._renderData=new Array();var c=null;if(document.createElementNS&&(this.renderEngine=="SVG"||this.renderEngine==undefined)){c=new a.jqx.svgRenderer();if(!c.init(this.host)){if(this.renderEngine=="SVG"){throw"Your browser does not support SVG"}return}}if(c==null&&this.renderEngine!="HTML5"){c=new a.jqx.vmlRenderer();if(!c.init(this.host)){if(this.renderEngine=="VML"){throw"Your browser does not support VML"}return}this._isVML=true}if(c==null&&(this.renderEngine=="HTML5"||this.renderEngine==undefined)){c=new a.jqx.HTML5Renderer();if(!c.init(this.host)){throw"Your browser does not support HTML5 Canvas"}}this.renderer=c;var b=this.renderer.getRect();this._render({x:1,y:1,width:b.width,height:b.height});if(this.renderer instanceof a.jqx.HTML5Renderer){this.renderer.refresh()}},saveAsPNG:function(c,b){return this._saveAsImage("png",c,b)},saveAsJPEG:function(c,b){return this._saveAsImage("jpeg",c,b)},_saveAsImage:function(j,g,l){if(g==undefined||g==""){g="chart."+j}if(l==undefined||l==""){l="http://www.jqwidgets.com/export_server/export.php"}var k=this.rendererEngine;var f=this.enableAnimations;this.enableAnimations=false;this.renderEngine="HTML5";if(this.renderEngine!=k){try{this.refresh()}catch(i){this.renderEngine=k;this.refresh();this.enableAnimations=f}}try{var d=this.renderer.getContainer()[0];if(d){var h=d.toDataURL("image/"+j);h=h.replace("data:image/"+j+";base64,","");var c=document.createElement("form");c.method="POST";c.action=l;c.style.display="none";document.body.appendChild(c);var m=document.createElement("input");m.name="fname";m.value=g;m.style.display="none";var b=document.createElement("input");b.name="content";b.value=h;b.style.display="none";c.appendChild(m);c.appendChild(b);c.submit();document.body.removeChild(c)}}catch(i){}if(this.renderEngine!=k){this.renderEngine=k;this.refresh();this.enableAnimations=f}return true},refresh:function(){this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","column","stackedcolumn","stackedcolumn100","pie","donut","scatter","bubble"],_render:function(z){this.renderer.clear();var k=this.backgroundImage;if(k==undefined||k==""){this.host.css({"background-image":""})}else{this.host.css({"background-image":(k.indexOf("(")!=-1?k:"url('"+k+"')")})}this._buildStats();var M=this.padding||{left:5,top:5,right:5,bottom:5};var U=this.renderer.rect(z.x,z.y,z.width-1,z.height-1);var E=this.renderer.beginGroup();var n=this.renderer.createClipRect(z);this.renderer.setClip(E,n);if(k==undefined||k==""){this.renderer.attr(U,{fill:this.background||this.backgroundColor||"white"})}else{this.renderer.attr(U,{fill:"transparent"})}if(this.showBorderLine!=false){var B=this.borderLineColor==undefined?this.borderColor:this.borderLineColor;if(B==undefined){B="#888888"}var l=this.borderLineWidth;if(isNaN(l)||l<0.5||l>10){l=1}this.renderer.attr(U,{"stroke-width":l,stroke:B})}var K={x:M.left,y:M.top,width:z.width-M.left-M.right,height:z.height-M.top-M.bottom};this._paddedRect=K;var e=this.titlePadding||{left:2,top:2,right:2,bottom:2};if(this.title&&this.title.length>0){var I=this.toThemeProperty("jqx-chart-title-text",null);var j=this.renderer.measureText(this.title,0,{"class":I});this.renderer.text(this.title,K.x+e.left,K.y+e.top,K.width-(e.left+e.right),j.height,0,{"class":I},true,"center","center");K.y+=j.height;K.height-=j.height}if(this.description&&this.description.length>0){var J=this.toThemeProperty("jqx-chart-title-description",null);var j=this.renderer.measureText(this.description,0,{"class":J});this.renderer.text(this.description,K.x+e.left,K.y+e.top,K.width-(e.left+e.right),j.height,0,{"class":J},true,"center","center");K.y+=j.height;K.height-=j.height}if(this.title||this.description){K.y+=(e.bottom+e.top);K.height-=(e.bottom+e.top)}var b={x:K.x,y:K.y,width:K.width,height:K.height};var C=this._isPieOnlySeries();var s={};for(var N=0;N<this.seriesGroups.length&&!C;N++){if(this.seriesGroups[N].type=="pie"||this.seriesGroups[N].type=="donut"){continue}var A=this.seriesGroups[N].orientation=="horizontal";var t=this.seriesGroups[N].valueAxis;if(!t){throw"seriesGroup["+N+"] is missing "+(A?"categoryAxis":"valueAxis")+" definition"}var d=this._getCategoryAxis(N);if(!d){throw"seriesGroup["+N+"] is missing "+(!A?"categoryAxis":"valueAxis")+" definition"}var r=d==this.categoryAxis?-1:N;s[r]=0}var o=0;var m=[];for(var N=0;N<this.seriesGroups.length;N++){if(this.seriesGroups[N].type=="pie"||this.seriesGroups[N].type=="donut"){m.push(0);continue}var A=this.seriesGroups[N].orientation=="horizontal";var r=this._getCategoryAxis(N)==this.categoryAxis?-1:N;var H=t.axisSize;var f={x:0,y:b.y,width:b.width,height:b.height};if(!H||H=="auto"){if(A){H=this._renderCategoryAxis(N,f,true,b).width;if((s[r]&1)==1){H=0}else{s[r]|=1}}else{H=this._renderValueAxis(N,f,true,b).width}}if(N>0&&H>0){o+=5}m.push(H);o+=H}var Q=0;var L=[];for(var N=0;N<this.seriesGroups.length;N++){if(this.seriesGroups[N].type=="pie"||this.seriesGroups[N].type=="donut"){L.push(0);continue}var A=this.seriesGroups[N].orientation=="horizontal";var d=this._getCategoryAxis(N);var r=d==this.categoryAxis?-1:N;var P=d.axisSize;if(!P||P=="auto"){if(A){P=this._renderValueAxis(N,{x:0,y:0,width:10000000,height:0},true,b).height}else{P=this._renderCategoryAxis(N,{x:0,y:0,width:10000000,height:0},true).height;if((s[r]&2)==2){P=0}else{s[r]|=2}}}L.push(P+5);Q+=P+5}this._plotRect=b;var q=(this.showLegend!=false);var u=!q||this.legendLayout?{width:0,height:0}:this._renderLegend(K,true);if(K.height<Q+u.height||K.width<o){return}b.height-=Q+u.height;if(!this.rtl){b.x+=o}b.width-=o;if(!C){var S=this.categoryAxis.tickMarksColor||"#888888";if(o==0){var G=a.jqx._ptrnd(b.x)}var P=0;for(var N=0;N<this.seriesGroups.length;N++){var A=this.seriesGroups[N].orientation=="horizontal";var r=this._getCategoryAxis(N)==this.categoryAxis?-1:N;var f={x:b.x,y:b.y+b.height+P,width:b.width,height:L[N]-5};if(A){this._renderValueAxis(N,f,false,b)}else{if((s[r]&4)==4){continue}this._renderCategoryAxis(N,f,false,b);s[r]|=4}P+=L[N]}}if(q){var G=b.x+a.jqx._ptrnd((b.width-u.width)/2);var F=b.y+b.height+Q;var H=b.width;var P=u.height;if(this.legendLayout){G=this.legendLayout.left||G;F=this.legendLayout.top||F;H=this.legendLayout.width||H;P=this.legendLayout.height||P}if(G+H>K.x+K.width){H=K.x+K.width-G}if(F+P>K.y+K.height){P=K.y+K.height-F}this._renderLegend({x:G,y:F,width:H,height:P})}this._hasHorizontalLines=false;if(!C){var v=b.x-o;for(var N=0;N<this.seriesGroups.length;N++){var A=this.seriesGroups[N].orientation=="horizontal";var H=m[N];if(N>0&&H>0){v+=5}var f={x:v,y:b.y,width:H,height:b.height};if(A){if((s[this._getCategoryAxis(N)]&8)==8){continue}this._renderCategoryAxis(N,f,false,b);s[this._getCategoryAxis(N)]|=8}else{this._renderValueAxis(N,f,false,b)}v+=H}}if(b.width<=0||b.height<=0){return}this._plotRect={x:b.x,y:b.y,width:b.width,height:b.height};var R=this.renderer.beginGroup();var D=this.renderer.createClipRect({x:b.x,y:b.y,width:b.width,height:b.height});this.renderer.setClip(R,D);this._createAnimationGroup("series");for(var N=0;N<this.seriesGroups.length;N++){var p=this.seriesGroups[N];var c=false;for(var T in this._seriesTypes){if(this._seriesTypes[T]==p.type){c=true;break}}if(!c){throw'jqxChart: invalid series type "'+p.type+'"';continue}if(p.type.indexOf("column")!=-1){this._renderColumnSeries(N,b)}else{if(p.type.indexOf("pie")!=-1||p.type.indexOf("donut")!=-1){this._renderPieSeries(N,b)}else{if(p.type.indexOf("line")!=-1||p.type.indexOf("area")!=-1){this._renderLineSeries(N,b)}else{if(p.type=="scatter"||p.type=="bubble"){this._renderScatterSeries(N,b)}}}}}this._startAnimation("series");this.renderer.endGroup();if(this.enabled==false){var O=this.renderer.rect(z.x,z.y,z.width,z.height);this.renderer.attr(O,{fill:"#777777",opacity:0.5,stroke:"#00FFFFFF"})}this.renderer.endGroup()},_isPieOnlySeries:function(){if(this.seriesGroups.length==0){return false}for(var b=0;b<this.seriesGroups.length;b++){if(this.seriesGroups[b].type!="pie"&&this.seriesGroups[b].type!="donut"){return false}}return true},_renderChartLegend:function(v,c,d,e){var n={x:c.x+3,y:c.y+3,width:c.width-6,height:c.height-6};var j={width:n.width,height:0};var h=0,g=0;var f=20;var b=0;var o=10;var u=10;var s=0;for(var q=0;q<v.length;q++){var k=v[q].css;if(!k){k=this.toThemeProperty("jqx-chart-legend-text",null)}var l=v[q].text;var m=this.renderer.measureText(l,0,{"class":k});if(m.height>f){f=m.height}if(m.width>s){s=m.width}if(e){if(q!=0){g+=f}if(g>n.height){g=0;h+=s+u;s=m.width;j.width=h+s}}else{if(h!=0){h+=u}if(h+2*o+m.width>n.width&&m.width<n.width){h=0;g+=f;f=20;b=n.width;j.heigh=g+f}}if(!d){var p=v[q].color;var t=this.renderer.rect(n.x+h,n.y+g+o/2,o,o);this.renderer.attr(t,{fill:p,stroke:p,"stroke-width":1});this.renderer.text(l,n.x+h+1.5*o,n.y+g,m.width,f,0,{"class":k},false,"center","center")}if(e){}else{h+=m.width+2*o;if(b<h){b=h}}}if(d){j.height=a.jqx._ptrnd(g+f);j.width=a.jqx._ptrnd(b);return j}},_renderLegend:function(n,l){var b=[];for(var r=0;r<this.seriesGroups.length;r++){var j=this.seriesGroups[r];if(j.showLegend==false){continue}var h=this._getCategoryAxis(r);var p=h.toolTipFormatSettings||h.formatSettings;var e=h.toolTipFormatFunction||h.formatFunction;for(var o=0;o<j.series.length;o++){var t=j.series[o];if(t.showLegend==false){continue}if(j.type=="pie"||j.type=="donut"){var m=t.colorScheme||j.colorScheme||this.colorScheme;var c=this._getDataLen(r);for(var f=0;f<c;f++){var k=this._getDataValue(f,t.displayText,r);k=this._formatValue(k,p,e);var d=this._getColor(m,o*c+f,r,o);b.push({groupIndex:r,seriesIndex:o,itemIndex:f,text:k,css:t.displayTextClass,color:d})}continue}var q=t.displayText||t.dataField||"";var d=this._getSeriesColor(r,o);b.push({groupIndex:r,seriesIndex:o,text:q,css:t.displayTextClass,color:d})}}return this._renderChartLegend(b,n,l,(this.legendLayout&&this.legendLayout.flow=="vertical"))},_renderCategoryAxis:function(j,f,h,k){var g=this._getCategoryAxis(j);var d=this.seriesGroups[j].orientation=="horizontal";var s={width:0,height:0};if(!g||g.visible==false){return s}var u=g.text;var D={visible:(g.showGridLines!=false),color:(g.gridLinesColor||"#888888"),unitInterval:(g.gridLinesInterval||g.unitInterval)};var q={visible:(g.showTickMarks!=false),color:(g.tickMarksColor||"#888888"),unitInterval:(g.tickMarksInterval||g.unitInterval)};var E=g.textRotationAngle||0;var G=f;if(d){G={x:f.x,y:f.y,width:f.height,height:f.width}}var n=this._calculateXOffsets(j,G);var z=g.unitInterval;if(isNaN(z)){z=1}var F=g.horizontalTextAlignment;var p=this._alignValuesWithTicks(j);var m=this.renderer.getRect();var c=m.width-f.x-f.width;var C=this._getDataLen(j);var w=[];if(g.type!="date"){var A=n.customRange!=false;var o=z;for(var B=n.min;B<=n.max;B+=o){if(A||g.dataField==undefined||g.dataField==""){value=B}else{var v=Math.round(B);value=this._getDataValue(v,g.dataField)}var u=this._formatValue(value,g.formatSettings,g.formatFunction);if(u==undefined){u=!A?value.toString():(B).toString()}w.push(u);if(B+o>n.max){o=n.max-B;if(o<=z/2){break}}}}else{var e=this._getDatesArray(n.min,n.max,g.baseUnit,p);for(var B=0;B<e.length;B+=z){w.push(this._formatValue(e[B],g.formatSettings,g.formatFunction))}}if(g.flip==true||this.rtl){w.reverse()}var l=g.descriptionClass;if(!l){l=this.toThemeProperty("jqx-chart-axis-description",null)}var t=g["class"];if(!t){t=this.toThemeProperty("jqx-chart-axis-text",null)}if(d){E-=90}var r={text:g.description,style:l,halign:g.horizontalDescriptionAlignment||"center",valign:g.verticalDescriptionAlignment||"center",textRotationAngle:d?-90:0};var b={textRotationAngle:E,style:t,halign:F,valign:g.verticalTextAlignment||"center"};return this._renderAxis(d,r,b,{x:f.x,y:f.y,width:f.width,height:f.height},k,z,false,p,w,n,D,q,h)},_renderAxis:function(F,P,l,u,c,D,k,Q,q,s,d,v,O){var m=v.visible?4:0;var L=2;var E={width:0,height:0};var o={width:0,height:0};if(F){E.height=o.height=u.height}else{E.width=o.width=u.width}if(P.text!=undefined&&P!=""){var p=P.textRotationAngle;var f=this.renderer.measureText(P.text,p,{"class":P.style});o.width=f.width;o.height=f.height;if(!O){this.renderer.text(P.text,u.x+(F?(!this.rtl?L:3*L+u.width+o.width+m):0),u.y+(!F?u.height-L-o.height:0),F?o.width:u.width,!F?o.height:u.height,p,{"class":P.style},true,P.halign,P.valign)}}var K=0;var r=Q?-s.itemWidth/2:0;if(Q&&!F){l.halign="center"}var N=0;var J=0;var b=s.itemWidth;for(var M=0;M<q.length;M++,K+=b){var t=q[M];var z=l.textRotationAngle;var f=this.renderer.measureText(t,z,{"class":l.style});if(f.width>J){J=f.width}if(f.height>N){N=f.height}if(!O&&(!f||(!F&&K+f.width+r<u.x+u.width)||(F&&K+f.height+r<c.y+c.height))){var H=u.x+K+r;var G=u.y+(Q?m:m/4);if(F){H=u.x+L+(o.width>0?(o.width+L):0)+(this.rtl?u.width-o.width:0);G=u.y+K+r}if(!k||(k&&(M%D)==0)){this.renderer.text(t,H,G,!F?b:u.width-2*L-m-((o.width>0)?o.width+L:0),F?b:u.height-2*L-m-((o.height>0)?o.height+L:0),z,{"class":l.style},true,l.halign,l.valign)}}}E.width+=2*L+m+o.width+J+(F&&o.width>0?L:0);E.height+=2*L+m+o.height+N+(!F&&o.height>0?L:0);var B={};if(!O){var G=a.jqx._ptrnd(u.y);if(F){this.renderer.line(a.jqx._ptrnd(u.x+u.width),u.y,a.jqx._ptrnd(u.x+u.width),u.y+u.height,{stroke:d.color,"stroke-width":1})}else{this.renderer.line(a.jqx._ptrnd(u.x),G,a.jqx._ptrnd(u.x+u.width+1),G,{stroke:d.color,"stroke-width":1})}}if(!O&&d.visible!=false){var j=d.unitInterval;if(isNaN(j)||j<=0){j=D}var n=k?q.length:s.rangeLength;var A=k?1:j;var C=k?b:(F?u.height:u.width)/s.rangeLength;var M=0;while(M<=n){if(k&&(M%j)!=0){M+=A;continue}var g=0;if(F){g=a.jqx._ptrnd(u.y+M*C);if(g>u.y+u.height){break}}else{g=a.jqx._ptrnd(u.x+M*C);if(g>u.x+u.width){break}}if(F){this.renderer.line(a.jqx._ptrnd(c.x),g,a.jqx._ptrnd(c.x+c.width),g,{stroke:d.color,"stroke-width":1})}else{this.renderer.line(g,a.jqx._ptrnd(c.y),g,a.jqx._ptrnd(c.y+c.height),{stroke:d.color,"stroke-width":1})}B[g]=true;M+=A;if(M>n&&M!=n+A){M=n}}}if(!O&&v.visible){var I=v.unitInterval;if(isNaN(I)||I<=0){I=D}var n=k?q.length:s.rangeLength+I;var A=k?1:I;var C=k?b:(F?u.height:u.width)/s.rangeLength;for(var M=0;M<=n;M+=A){if(k&&(M%I/D)!=0){continue}var g=a.jqx._ptrnd((F?u.y:u.x)+M*C);if(B[g-1]){g--}else{if(B[g+1]){g++}}if(F){if(g>u.y+u.height){break}}else{if(g>u.x+u.width){break}}if(F){var e=!this.rtl?-m:m;this.renderer.line(u.x+u.width,g,u.x+u.width+e,g,{stroke:d.color,"stroke-width":1})}else{this.renderer.line(g,u.y,g,u.y+m,{stroke:d.color,"stroke-width":1})}}}E.width=a.jqx._rup(E.width);E.height=a.jqx._rup(E.height);return E},_renderValueAxis:function(m,f,k,n){var J=this.seriesGroups[m];var c=J.orientation=="horizontal";var j=J.valueAxis;if(!j){throw"SeriesGroup "+m+" is missing valueAxis definition"}var w={width:0,height:0};if(this._isPieOnlySeries()){if(k){return w}return}var u=this._stats.seriesGroups[m];if(!u||!u.isValid||false==j.displayValueAxis||false==j.visible){if(k){return w}return}var o=j.descriptionClass;if(!o){o=this.toThemeProperty("jqx-chart-axis-description",null)}var v={text:j.description,style:o,halign:j.horizontalDescriptionAlignment||"center",valign:j.verticalDescriptionAlignment||"center",textRotationAngle:c?0:(!this.rtl?-90:90)};var z=j.itemsClass;if(!z){z=this.toThemeProperty("jqx-chart-axis-text",null)}var b={style:z,halign:j.horizontalTextAlignment||"center",valign:j.verticalTextAlignment||"center",textRotationAngle:j.textRotationAngle||0};var q=j.valuesOnTicks!=false;var e=j.dataField;var B=u.intervals;var G=u.min;var E=u.mu;var I=j.formatSettings;var h=J.type.indexOf("stacked")!=-1&&J.type.indexOf("100")!=-1;if(h&&!I){I={sufix:"%"}}if(!q){B=Math.max(B-1,1)}var d=j.logarithmicScale==true;var l=j.logarithmicScaleBase||10;if(d){E=!isNaN(j.unitInterval)?j.unitInterval:1}var D=(c?f.width:f.height)/B;var t=f.y+f.height-D;var C=[];var p={};p.data=[];p.itemWidth=D;for(var H=0;H<=B;H++){var F=0;if(d){if(h){F=u.max/Math.pow(l,B-H)}else{F=G*Math.pow(l,H)}}else{F=q?G+H*E:G+(H+0.5)*E}var A=(j.formatFunction)?j.formatFunction(F):this._formatNumber(F,I);C.push(A);p.data.push(t+D/2);t-=D}p.rangeLength=d&&!h?u.intervals:(u.intervals)*E;if(J.valueAxis.flip!=true){p.data=p.data.reverse();C=C.reverse()}var L=j.gridLinesInterval||j.unitInterval;if(isNaN(L)||(d&&L<E)){L=E}var K={visible:(j.showGridLines!=false),color:(j.gridLinesColor||"#888888"),unitInterval:L};var s=j.tickMarksInterval||j.unitInterval;if(isNaN(s)||(d&&s<E)){s=E}var r={visible:(j.showTickMarks!=false),color:(j.tickMarksColor||"#888888"),unitInterval:s};if(this.rtl){f.x=n.width+f.x}return this._renderAxis(!c,v,b,f,n,E,d,q,C,p,K,r,k)},_buildStats:function(){var N={seriesGroups:new Array()};this._stats=N;for(var J=0;J<this.seriesGroups.length;J++){var r=this.seriesGroups[J];N.seriesGroups[J]={};var f=N.seriesGroups[J];f.isValid=true;var b=r.valueAxis!=undefined;var e=false;var l=10;if(b){e=r.valueAxis.logarithmicScale==true;l=r.valueAxis.logarithmicScaleBase;if(isNaN(l)){l=10}}var t=-1!=r.type.indexOf("stacked");var j=t&&-1!=r.type.indexOf("100");if(j){f.psums=new Array();f.nsums=new Array()}var d=NaN,h=NaN;var L=NaN,O=NaN;var K=r.baselineValue;if(isNaN(K)){K=e&&!j?1:0}var I=this._getDataLen(J);var o=0;var D=NaN;for(var H=0;H<I&&f.isValid;H++){var E=b?r.valueAxis.minValue:Infinity;var G=b?r.valueAxis.maxValue:-Infinity;var m=0,n=0;for(var z=0;z<r.series.length;z++){var P=this._getDataValueAsNumber(H,r.series[z].dataField,J);if(isNaN(P)||(e&&P<=0)){continue}if((isNaN(G)||P>G)&&((!b||isNaN(r.valueAxis.maxValue))?true:P<=r.valueAxis.maxValue)){G=P}if((isNaN(E)||P<E)&&((!b||isNaN(r.valueAxis.minValue))?true:P>=r.valueAxis.minValue)){E=P}if(P>K){m+=P}else{if(P<K){n+=P}}}if(e&&j){for(var z=0;z<r.series.length;z++){var P=this._getDataValueAsNumber(H,r.series[z].dataField,J);if(isNaN(P)||P<=0){continue}var C=m==0?0:P/m;if(isNaN(D)||C<D){D=C}}}var w=m-n;if(o<w){o=w}if(j){f.psums[H]=m;f.nsums[H]=n}if(G>h||isNaN(h)){h=G}if(E<d||isNaN(d)){d=E}if(m>L||isNaN(L)){L=m}if(n<O||isNaN(O)){O=n}}if(j){L=L==0?0:Math.max(L,-O);O=O==0?0:Math.min(O,-L)}var B=b?r.valueAxis.unitInterval:0;if(!B){B=t?(L-O)/10:(h-d)/10}var k=NaN;var c=0;var A=0;if(e){if(j){k=0;var C=1;c=A=a.jqx.log(100,l);while(C>D){C/=l;c--;k++}d=Math.pow(l,c)}else{if(t){h=Math.max(h,L)}A=a.jqx._rnd(a.jqx.log(h,l),1,true);h=Math.pow(l,A);c=a.jqx._rnd(a.jqx.log(d,l),1,false);d=Math.pow(l,c)}B=l}var q=b?r.valueAxis.tickMarksInterval||B:0;var M=b?r.valueAxis.gridLinesInterval||B:0;if(d<O){O=d}if(h>L){L=h}var F=e?d:a.jqx._rnd(t?O:d,B,false);var v=e?h:a.jqx._rnd(t?L:h,B,true);if(j&&v>100){v=100}if(j&&!e){v=(v>0)?100:0;F=(F<0)?-100:0;B=b?r.valueAxis.unitInterval:10;if(isNaN(B)||B<=0||B>=100){B=10}if(q<=0||q>=100){q=10}if(M<=0||M>=100){M=10}}if(isNaN(v)||isNaN(F)||isNaN(B)){continue}if(isNaN(k)){k=(v-F)/(B==0?1:B)}if(e&&!j){k=A-c;o=Math.pow(l,k)}if(k<1){continue}var u=v-F;f.rmax=t?L:h;f.rmin=t?O:d;f.min=F;f.max=v;f.minPow=c;f.maxPow=A;f.mu=B;f.maxRange=o;f.intervals=k;f.tickMarksInterval=q;f.tickMarksIntervals=q==0?0:u/q;f.gridLinesInterval=M;f.gridLinesIntervals=M==0?0:u/M;if(u==0){u=1}f.scale=t?(L-O)/u:(h-d)/u}},_getDataLen:function(c){var b=this.source;if(c!=undefined&&c!=-1&&this.seriesGroups[c].source){b=this.seriesGroups[c].source}if(b instanceof a.jqx.dataAdapter){b=b.records}if(b){return b.length}return 0},_getDataValue:function(b,e,d){var c=this.source;if(d!=undefined&&d!=-1){c=this.seriesGroups[d].source||c}if(c instanceof a.jqx.dataAdapter){c=c.records}if(!c||b<0||b>c.length-1){return NaN}return(e&&e!="")?c[b][e]:c[b]},_getDataValueAsNumber:function(b,e,c){var d=this._getDataValue(b,e,c);if(this._isDate(d)){return d.valueOf()}if(typeof(d)!="number"){d=parseFloat(d)}if(typeof(d)!="number"){d=undefined}return d},_renderPieSeries:function(d,D){var n=this._getDataLen(d);var r=this.seriesGroups[d];while(this._renderData.length<d+1){this._renderData.push(null)}this._renderData[d]=[];for(var g=0;g<r.series.length;g++){var J=r.series[g];var q=J.colorScheme||r.colorScheme||this.colorScheme;var h=J.initialAngle||0;var O=h;var L=J.radius||Math.min(D.width,D.height)*0.4;if(isNaN(L)){L=1}var b=J.innerRadius||0;if(isNaN(b)||b>=L){b=0}var e=J.centerOffset||0;var I=a.jqx.getNum([J.offsetX,r.offsetX,D.width/2]);var G=a.jqx.getNum([J.offsetY,r.offsetY,D.height/2]);var E=this._getAnimProps(d,g);var w=E.enabled&&n<5000&&this._isVML!=true?E.duration:0;if(a.jqx.mobile.isMobileBrowser()&&(this.renderer instanceof a.jqx.HTML5Renderer)){w=0}this._renderData[d].push([]);var m=0;var o=0;for(var Q=0;Q<n;Q++){var C=this._getDataValueAsNumber(Q,J.dataField,d);if(typeof(C)!="number"){continue}if(C>0){m+=C}else{o+=C}}var l=m-o;if(l==0){l=1}for(var Q=0;Q<n;Q++){var C=this._getDataValueAsNumber(Q,J.dataField,d);if(typeof(C)!="number"){continue}var p=Math.round(Math.abs(C)/l*360);if(Q+1==n){p=360+h-O}var H=D.x+I;var F=D.y+G;var M={x1:H,y1:F,innerRadius:b,outerRadius:L,key:d+"_"+g+"_"+Q};this._renderData[d][g].push(M);var N=this.renderer.pieslice(H,F,b,L,O,w==0?O+p:O,e);var S=e;if(a.isFunction(e)){S=e({seriesIndex:g,seriesGroupIndex:d,itemIndex:Q})}if(isNaN(S)){S=0}var t={x:H,y:F,innerRadius:b,outerRadius:L,fromAngle:O,toAngle:O+p,centerOffset:S};var k=this;this._enqueueAnimation("series",N,undefined,w,function(T,i,U){var s=i.fromAngle+U*(i.toAngle-i.fromAngle);var V=k.renderer.pieSlicePath(i.x,i.y,i.innerRadius,i.outerRadius,i.fromAngle,s,i.centerOffset);k.renderer.attr(T,{d:V})},t);var K=this._getColors(d,g,Q,"radialGradient",L);this.renderer.attr(N,{fill:K.fillColor,stroke:K.lineColor,"stroke-width":1});var u=O,P=O+p;var A=Math.abs(u-P);var R=A>180?1:0;if(A>360){u=0;P=360}var f=u*Math.PI*2/360;var v=P*Math.PI*2/360;var B=A/2+u;var c=B*Math.PI*2/360;var j=this._showLabel(d,g,Q,{x:0,y:0,width:0,height:0},"left","top",true);var z=J.labelRadius||L+Math.max(j.width,j.height);z+=e;var H=a.jqx._ptrnd(D.x+I+z*Math.cos(c)-j.width/2);var F=a.jqx._ptrnd(D.y+G-z*Math.sin(c)-j.height/2);this._showLabel(d,g,Q,{x:H,y:F,width:j.width,height:j.height},"left","top");this._installHandlers(N,d,g,Q);O+=p}}},_renderColumnSeries:function(g,c){var r=this.seriesGroups[g];if(!r.series||r.series.length==0){return}var t=r.type.indexOf("stacked")!=-1;var e=t&&r.type.indexOf("100")!=-1;var q=this._getDataLen(g);var N=r.columnsGapPercent;if(isNaN(N)||N<0||N>100){N=25}var A=r.seriesGapPercent;if(isNaN(A)||A<0||A>100){A=10}var f=r.orientation=="horizontal";var K=c;if(f){K={x:c.y,y:c.x,width:c.height,height:c.width}}var z=this._calcGroupOffsets(g,K);if(!z||z.xoffsets.length==0){return}for(var C=0;C<r.series.length;C++){var v=r.series[C];var F=v.dataField;var E=this._getAnimProps(g,C);var b=E.enabled&&z.xoffsets.length<100?E.duration:0;var p=this._alignValuesWithTicks(g);var o=[];for(var G=z.xoffsets.first;G<=z.xoffsets.last;G++){var O=this._getDataValueAsNumber(G,F,g);if(typeof(O)!="number"){continue}var J=z.xoffsets.data[G];if(p){J-=z.xoffsets.itemWidth/2}var I=J+z.xoffsets.itemWidth;var l=(I-J+1);var M=(I-J+1)/(1+N/100);var n=(!t&&r.series.length>1)?(M*A/100)/(r.series.length-1):0;var L=(M-n*(r.series.length-1));if(M<1){M=1}var k=0;if(!t&&r.series.length>1){L/=r.series.length;k=C}var u=J+(l-M)/2+k*(n+L);if(k==r.series.length){L=l-J+M-u}var d=z.offsets[C][G].to;var D=z.offsets[C][G].from;var j=z.baseOffset;var H=D-d;var m={x:c.x+u,y:Math.min(d,D),width:L,height:Math.abs(H)};if(f){m={height:L,y:c.y+u};m.x=D;m.width=Math.abs(H);if(H>0){m.x-=H}}o.push({itemIndex:G,rect:m,size:H,vertical:!f})}var B={groupIndex:g,seriesIndex:C,items:o};this._animateColumns(B,b==0?1:0);var w=this;this._enqueueAnimation("series",undefined,undefined,b,function(i,h,s){w._animateColumns(h,s)},B)}},_calcStackedItemSize:function(o,m,e,h){var c=this._renderData[o];var g=0,n=0;for(var f=0;f<c.offsets.length;f++){var i=Math.abs(c.offsets[f][e].to-c.offsets[f][e].from);if(c.offsets[f][e].to<c.baseOffset){g+=i}else{n+=i}}var b=n*h;var k=g*h;g=0;n=0;var j=0;for(var f=0;f<=m;f++){j=Math.abs(c.offsets[f][e].to-c.offsets[f][e].from);if(c.offsets[f][e].to<c.baseOffset){g+=j}else{n+=j}}var l=Math.abs(c.offsets[m][e].to-c.offsets[m][e].from);if(c.offsets[m][e].to>=c.baseOffset){g=n;k=b}if(k<g-l){return 0}if(k>=g){return l}return k-(g-l)},_animateColumns:function(c,f){var m=c.groupIndex;var k=c.seriesIndex;var l=this.seriesGroups[m];var o=l.series[k];var b=this._getColors(m,k,undefined,this._getGroupGradientType(m));var e=o.opacity||l.opacity;if(!e||e<0||e>1){e=1}var j=l.type.indexOf("stacked")!=-1;var g=c.items;for(var d=0;d<g.length;d++){var h=g[d].rect;var n=a.jqx._ptrnd(g[d].size*f);if(j){n=this._calcStackedItemSize(m,k,d,f);if(n==0){continue}if(g[d].size<0){n*=-1}}if(g[d].element==undefined){g[d].element=this.renderer.rect(h.x,h.y,g[d].vertical?h.width:0,g[d].vertical?0:h.height);this.renderer.attr(g[d].element,{fill:b.fillColor,"fill-opacity":e,stroke:b.lineColor,"stroke-width":1})}n=Math.abs(n);if(g[d].vertical==true){if(g[d].size<0){this.renderer.attr(g[d].element,{height:n})}else{this.renderer.attr(g[d].element,{y:h.y+h.height-n,height:n})}}else{if(g[d].size<0){this.renderer.attr(g[d].element,{width:n})}else{this.renderer.attr(g[d].element,{x:h.x+h.width-n,width:n})}}if(f==1){this._installHandlers(g[d].element,m,k,d);this._showLabel(m,k,d,h)}}},_renderScatterSeries:function(f,d){var m=this.seriesGroups[f];if(!m.series||m.series.length==0){return}var c=m.type=="bubble";var e=m.orientation=="horizontal";var G=d;if(e){G={x:d.y,y:d.x,width:d.height,height:d.width}}var v=this._calcGroupOffsets(f,G);if(!v||v.xoffsets.length==0){return}var k=this._alignValuesWithTicks(f);for(var z=0;z<m.series.length;z++){var o=this._getColors(f,z,undefined,this._getGroupGradientType(f));var q=m.series[z];var C=q.dataField;var g=q.opacity||m.opacity;if(!g||g<0||g>1){g=1}var A=NaN,D=NaN;if(c){for(var E=v.xoffsets.first;E<=v.xoffsets.last;E++){var J=this._getDataValueAsNumber(E,q.radiusDataField,f);if(typeof(J)!="number"){throw"Invalid radiusDataField value at ["+E+"]"}if(isNaN(A)||J<A){A=J}if(isNaN(D)||J>D){D=J}}}var l=q.minRadius;if(isNaN(l)){l=d.width/50}var j=q.maxRadius;if(isNaN(j)){j=d.width/25}if(l>j){throw"Invalid settings: minRadius must be less than or equal to maxRadius"}var h=q.radius||5;var B=this._getAnimProps(f,z);var b=B.enabled&&v.xoffsets.length<5000?B.duration:0;for(var E=v.xoffsets.first;E<=v.xoffsets.last;E++){var J=this._getDataValueAsNumber(E,C,f);if(typeof(J)!="number"){continue}var p=v.xoffsets.data[E];var n=v.offsets[z][E].to;if(isNaN(p)||isNaN(n)){continue}if(e){var H=p;p=n;n=H+d.y}else{p+=d.x}p=a.jqx._ptrnd(p);n=a.jqx._ptrnd(n);var t=h;if(c){var I=this._getDataValueAsNumber(E,q.radiusDataField,f);if(typeof(I)!="number"){continue}t=l+(j-l)*(I-A)/Math.max(1,D-A);if(isNaN(t)){t=l}}var F=this.renderer.circle(p,n,b==0?t:0);this.renderer.attr(F,{fill:o.fillColor,"fill-opacity":g,stroke:o.lineColor,"stroke-width":1});var w={from:0,to:t,groupIndex:f,seriesIndex:z,itemIndex:E,x:p,y:n};var u=this;this._enqueueAnimation("series",F,undefined,b,function(s,i,L){u._animR(s,i,L);if(L>=1){var K=c?i.to:0;u._showLabel(i.groupIndex,i.seriesIndex,i.itemIndex,{x:i.x-K,y:i.y-K,width:2*K,height:2*K})}},w);this._installHandlers(F,f,z,E)}}},_animR:function(c,b,e){var d=Math.round((b.to-b.from)*e+b.from);if(this._isVML){this.renderer.updateCircle(c,undefined,undefined,d)}else{this.renderer.attr(c,{r:d})}},_showToolTip:function(j,g,u,q,c){if(this.showToolTips==false){return}var p=this._getCategoryAxis(u);if(this._toolTipElement&&u==this._toolTipElement.gidx&&q==this._toolTipElement.sidx&&c==this._toolTipElement.iidx){return}if(this._pointMarker){j=parseInt(this._pointMarker.x+5);g=parseInt(this._pointMarker.y-5)}var f=this.seriesGroups[u];var k=f.series[q];var e=k.toolTipFormatSettings||f.toolTipFormatSettings;var o=k.toolTipFormatFunction||f.toolTipFormatFunction;var h=this._getColors(u,q,c);var l=this._getFormattedValue(u,q,c,e,o);var b=this._getDataValue(c,p.dataField,u);if(p.dataField==undefined||p.dataField==""){b=c}var A=p.toolTipFormatSettings||p.formatSettings;var d=p.toolTipFormatFunction||p.formatFunction;if(p.type=="date"){b=this._castAsDate(b)}var B=this._formatValue(b,A,d);if(f.type!="pie"&&f.type!="donut"){l=(k.displayText||k.dataField||"")+", "+B+": "+l}else{b=this._getDataValue(c,k.displayText||k.dataField,u);B=this._formatValue(b,A,d);l=B+": "+l}var s=k.toolTipClass||f.toolTipClass||this.toThemeProperty("jqx-chart-tooltip-text",null);var v=k.toolTipBackground||f.toolTipBackground||"#FFFFFF";var z=k.toolTipLineColor||f.toolTipLineColor||h.lineColor;var n=this.renderer.measureText(l,0,{"class":s});var w={width:n.width,height:n.height};n.width=n.width+5;n.height=n.height+6;rect=this.renderer.getRect();j=Math.max(j-5,rect.x);g=Math.max(g-n.height,rect.y);if(n.width>rect.width||n.height>rect.height){return}if(j+n.width>rect.x+rect.width){j=rect.x+rect.width-n.width-2}if(g+n.height>rect.y+rect.height){g=rect.y+rect.height-n.height-2}j=a.jqx._ptrnd(j);g=a.jqx._ptrnd(g);var t=this._toolTipElement==undefined;var i=t?this.renderer.rect(j,g,n.width,n.height):this._toolTipElement.box;this.renderer.attr(i,{fill:v,"fill-opacity":t?0:0.8,stroke:z,rx:2,ry:2,"stroke-width":1});var m=t?this.renderer.text(l,j,g,n.width,n.height,0,{"class":s,opacity:0},false,"center","center"):this._toolTipElement.txt;this._toolTipElement={box:i,txt:m,sidx:q,gidx:u,iidx:c};this._createAnimationGroup("tooltip");if(t){this._enqueueAnimation("tooltip",i,[{key:"fill-opacity",from:0,to:0.8}],200);this._enqueueAnimation("tooltip",m,[{key:"opacity",from:0,to:1}],500)}else{var r=this.renderer instanceof (a.jqx.svgRenderer);this.renderer.attr(i,{width:n.width,height:n.height});this._enqueueAnimation("tooltip",i,[{key:"x",from:parseInt(this.renderer.getAttr(i,"x")),to:j},{key:"y",from:parseInt(this.renderer.getAttr(i,"y")),to:g}],200);this.renderer.attr(m,{textContent:l,"class":s,width:w.width,height:w.height});if(r){g+=n.height-6}else{g+=(n.height-w.height)/2+2}j+=(n.width-w.width)/2+2;this._enqueueAnimation("tooltip",m,[{key:"x",from:parseInt(this.renderer.getAttr(m,"x")),to:j},{key:"y",from:parseInt(this.renderer.getAttr(m,"y")),to:g}],200)}this._startAnimation("tooltip")},_hideToolTip:function(){if(!this._toolTipElement){return}this.renderer.removeElement(this._toolTipElement.box);this.renderer.removeElement(this._toolTipElement.txt);this._toolTipElement=undefined},_showLabel:function(r,n,c,j,f,k,g){var p=this.seriesGroups[r];var b=p.series[n];var i={width:0,height:0};if(b.showLabels==false||(!b.showLabels&&!p.showLabels)){return i}if(j.width<0||j.height<0){return i}var m=b.labelsAngle||p.labelsAngle||0;var o=b.labelOffset||p.labelAngle||{x:0,y:0};var e=b.labelClass||p.labelClass||this.toThemeProperty("jqx-chart-label-text",null);f=f||"center";k=k||"center";var q=this._getFormattedValue(r,n,c);var l=j.width;var d=j.height;if(l==0||d==0||g){i=this.renderer.measureText(q,m,{"class":e});if(g){return i}l=i.width;d=i.height}var s=this.renderer.text(q,j.x+o.x,j.y+o.y,l,d,m,{},m!=0,f,k);this.renderer.attr(s,{"class":e});if(this._isVML){this.renderer.removeElement(s);this.renderer.getContainer()[0].appendChild(s)}},_getAnimProps:function(j,f){var e=this.seriesGroups[j];var c=e.series[f];var b=this.enableAnimations==true;if(e.enableAnimations){b=e.enableAnimations==true}if(c.enableAnimations){b=c.enableAnimations==true}var i=this.animationDuration;if(isNaN(i)){i=1000}var d=e.animationDuration;if(!isNaN(d)){i=d}var h=c.animationDuration;if(!isNaN(h)){i=h}if(i>5000){i=1000}return{enabled:b,duration:i}},_renderLineSeries:function(e,F){var z=this.seriesGroups[e];if(!z.series||z.series.length==0){return}var l=z.type.indexOf("area")!=-1;var C=z.type.indexOf("stacked")!=-1;var b=C&&z.type.indexOf("100")!=-1;var S=z.type.indexOf("spline")!=-1;var m=z.type.indexOf("step")!=-1;if(m&&S){return}var p=this._getDataLen(e);var Q=F.width/p;var v=Math.round(F.width/Q);var d=Math.round(p/v);var V=z.orientation=="horizontal";var r=this._getCategoryAxis(e).flip==true;var o=F;if(V){o={x:F.y,y:F.x,width:F.height,height:F.width}}var t=this._calcGroupOffsets(e,o);if(!t||t.xoffsets.length==0){return}var H=this._alignValuesWithTicks(e);for(var M=z.series.length-1;M>=0;M--){var T=this._getLineSettings(e,M);var J=t.xoffsets.first;var w=J;do{var K=[];var E=-1;var j=0;var G=NaN;var u=NaN;var U=NaN;if(t.xoffsets.length<1){continue}var I=this._getAnimProps(e,M);var D=I.enabled&&t.xoffsets.length<10000&&this._isVML!=true?I.duration:0;var n=J;for(var R=J;R<=t.xoffsets.last;R++){J=R;var L=t.xoffsets.data[R];if(L==undefined){continue}var h=t.offsets[M][R].to;if(h==undefined){J++;break}w=R;if(!l&&b){if(h<=o.y){h=o.y+1}if(h>=o.y+o.height){h=o.y+o.height-1}}L=Math.max(L,1);j=L;if(m&&!isNaN(G)&&!isNaN(u)){if(u!=h){K.push(V?{y:o.x+j,x:a.jqx._ptrnd(u)}:{x:o.x+j,y:a.jqx._ptrnd(u)})}}K.push(V?{y:o.x+j,x:a.jqx._ptrnd(h),index:R}:{x:o.x+j,y:a.jqx._ptrnd(h),index:R});G=j;u=h;if(isNaN(U)){U=h}}var f=o.x+t.xoffsets.data[n];var O=o.x+t.xoffsets.data[w];if(l&&z.alignEndPointsWithIntervals==true){var q=r?-1:1;if(f>o.x){f=o.x}if(O<o.x+o.width){O=o.x+o.width}if(r){var N=f;f=O;O=N}}O=a.jqx._ptrnd(O);f=a.jqx._ptrnd(f);var g=t.baseOffset;U=a.jqx._ptrnd(U);var c=a.jqx._ptrnd(h)||g;var B=this._calculateLine(K,g,D==0?1:0,l,V);if(B!=""){B=this._buildLineCmd(B,f,O,U,c,g,l,S&&K.length>3,V)}else{B="M 0 0"}var P=this.renderer.path(B,{"stroke-width":T.stroke,stroke:T.colors.lineColor,"fill-opacity":T.opacity,fill:l?T.colors.fillColor:"none"});this._installHandlers(P,e,M);var A={groupIndex:e,seriesIndex:M,pointsArray:K,left:f,right:O,pyStart:U,pyEnd:c,yBase:g,isArea:l,isSpline:S};var k=this;this._enqueueAnimation("series",P,undefined,D,function(Y,s,Z){var aa=k._calculateLine(s.pointsArray,s.yBase,Z,s.isArea,V);if(aa==""){return}var X=s.pointsArray.length;if(!s.isArea){X=Math.round(X*Z)}aa=k._buildLineCmd(aa,s.left,s.right,s.pyStart,s.pyEnd,s.yBase,s.isArea,X>3&&s.isSpline,V);k.renderer.attr(Y,{d:aa});if(Z==1){var ab=k._getLineSettings(s.groupIndex,s.seriesIndex);for(var W=0;W<s.pointsArray.length;W++){k._showLabel(s.groupIndex,s.seriesIndex,s.pointsArray[W].index,{x:s.pointsArray[W].x,y:s.pointsArray[W].y,width:0,height:0});k._drawSymbol(k._getSymbol(s.groupIndex,s.seriesIndex),s.pointsArray[W].x,s.pointsArray[W].y,ab.colors.fillColor,ab.colors.lineColor,1,ab.opacity)}}},A)}while(J<t.xoffsets.length-1)}},_calculateLine:function(f,l,g,h,e){var c="";var b=f.length;if(!h){b=Math.round(b*g)}for(var d=0;d<b;d++){if(d>0){c+=" "}var j=f[d].y;var k=f[d].x;if(h){if(e){k=a.jqx._ptrnd((k-l)*g+l)}else{j=a.jqx._ptrnd((j-l)*g+l)}}c+=k+","+j}return c},_buildLineCmd:function(l,g,p,o,b,q,n,d,k){var f=l;if(d){f=this._getBezierPoints(l)}var m=f.split(" ");var j=m[0].replace("C","");if(n){var e=k?o+","+g:g+","+o;var h=k?b+","+p:p+","+b;var c=k?q+","+g:g+","+q;var i=k?q+","+p:p+","+q;f="M "+c+" L "+j+(d?"":(" L "+j+" "))+f+(d?(" L"+i+" M "+i):(" "+i+" "+c));f+=" Z"}else{if(d){f="M "+j+" "+f}else{f="M "+j+" L "+j+" "+f}}return f},_getLineSettings:function(f,c){var h=this.seriesGroups[f];var e=h.type.indexOf("area")!=-1;var b=this._getColors(f,c,undefined,this._getGroupGradientType(f));var d=h.series[c].opacity||h.opacity;if(!d||d<0||d>1){d=1}var g=h.series[c].lineWidth||h.lineWidth;if(!g||g=="auto"||isNaN(g)||g<1||g>15){g=e?2:3}return{colors:b,stroke:g,opacity:d}},_getColors:function(s,p,d,e){var l=this.seriesGroups[s];if(l.type!="pie"&&l.type!="donut"){d=undefined}var c=l.series[p].useGradient||l.useGradient;if(c==undefined){c=true}var q;if(!isNaN(d)){var k=this._getDataLen(s);q=this._getColor(l.series[p].colorScheme||l.colorScheme||this.colorScheme,p*k+d,s,p)}else{q=this._getSeriesColor(s,p)}var f=a.jqx._adjustColor(q,1.1);var b=a.jqx._adjustColor(q,0.9);var m=a.jqx._adjustColor(f,0.9);var h=q;var n=f;var i=[[0,1.5],[100,1]];var g=[[0,1],[25,1.1],[50,1.5],[100,1]];var o=[[0,1.3],[90,1.2],[100,1]];if(c){if(e=="verticalLinearGradient"){h=this.renderer._toLinearGradient(q,true,i);n=this.renderer._toLinearGradient(f,true,i)}else{if(e=="horizontalLinearGradient"){h=this.renderer._toLinearGradient(q,false,g);n=this.renderer._toLinearGradient(f,false,g)}else{if(e=="radialGradient"){var r=undefined;var j=i;if((l.type=="pie"||l.type=="donut")&&d!=undefined&&this._renderData[s]&&this._renderData[s][p]){r=this._renderData[s][p][d];j=o}h=this.renderer._toRadialGradient(q,j,r);n=this.renderer._toRadialGradient(f,j,r)}}}}return{baseColor:q,fillColor:h,lineColor:b,fillSelected:n,lineSelected:m}},_installHandlers:function(d,j,i,c){var b=this;var h=this.seriesGroups[j];var e=this.seriesGroups[j].series[i];var f=h.type.indexOf("line")!=-1||h.type.indexOf("area")!=-1;if(!f){this.renderer.addHandler(d,"mousemove",function(g){g.preventDefault();b._startTooltipTimer(j,i,c)})}this.renderer.addHandler(d,"mouseover",function(g){g.preventDefault();b._select(d,j,i,c);if(f){return}if(isNaN(c)){return}b._raiseEvent("mouseover",h,e,c)});this.renderer.addHandler(d,"mouseout",function(g){g.preventDefault();if(c!=undefined){b._cancelTooltipTimer()}if(f){return}b._unselect();if(isNaN(c)){return}b._raiseEvent("mouseout",h,e,c)});this.renderer.addHandler(d,"click",function(g){g.preventDefault();if(f){return}if(h.type.indexOf("column")!=-1){b._unselect()}if(isNaN(c)){return}b._raiseEvent("click",h,e,c)})},_getHorizontalOffset:function(u,p,j,h){var c=this._plotRect;var f=this._getDataLen(u);if(f==0){return{index:undefined,value:j}}var n=this._calcGroupOffsets(u,this._plotRect);if(n.xoffsets.length==0){return{index:undefined,value:undefined}}var l=j-c.x;var k=h-c.y;var r=this.seriesGroups[u];if(r.orientation=="horizontal"){var t=l;l=k;k=t}var e=this._getCategoryAxis(u).flip==true;var b=undefined;var m=undefined;for(var q=0;q<n.xoffsets.length;q++){var s=n.xoffsets.data[q];var d=n.offsets[p][q].to;var o=Math.abs(l-s);if(isNaN(b)||b>o){b=o;m=q}}return{index:m,value:n.xoffsets.data[m]}},onmousemove:function(n,l){if(this._mouseX==n&&this._mouseY==l){return}this._mouseX=n;this._mouseY=l;if(!this._selected){return}var m=this._plotRect;var b=this._paddedRect;if(n<b.x||n>b.x+b.width||l<b.y||l>b.y+b.height){this._unselect();return}var p=this._selected.group;var j=this.seriesGroups[p];var t=j.series[this._selected.series];var e=j.orientation=="horizontal";var k=this.seriesGroups[p].type;var m=this._plotRect;if(k.indexOf("line")!=-1||k.indexOf("area")!=-1){var d=this._getHorizontalOffset(p,this._selected.series,n,l);var h=d.index;if(h==undefined){return}if(this._selected.item!=h){if(this._selected.item){this._raiseEvent("mouseout",j,t,this._selected.item)}this._selected.item=h;this._raiseEvent("mouseover",j,t,h)}var r=this._getSymbol(this._selected.group,this._selected.series);if(r=="none"){r="circle"}var o=this._calcGroupOffsets(p,m);l=o.offsets[this._selected.series][h].to;if(l==undefined){return}n=d.value;if(e){var f=n;n=l;l=f+m.y}else{n+=m.x}l=a.jqx._ptrnd(l);n=a.jqx._ptrnd(n);if(this._pointMarker){this.renderer.removeElement(this._pointMarker.element)}var c=this._getSeriesColor(this._selected.group,this._selected.series);var q=a.jqx._adjustColor(c,0.5);this._pointMarker={type:r,x:n,y:l,gidx:p,sidx:this._selected.series,iidx:h};this._pointMarker.element=this._drawSymbol(r,n,l,c,q,1,1,8);this._startTooltipTimer(p,this._selected.series,h)}},_drawSymbol:function(g,i,h,j,k,d,e,m){var c;var f=m||6;var b=f/2;switch(g){case"none":return undefined;case"circle":c=this.renderer.circle(i,h,f/2);break;case"square":f=f-1;b=f/2;c=this.renderer.rect(i-b,h-b,f,f);break;case"diamond":var l="M "+(i-b)+","+(h)+" L "+(i)+","+(h+b)+" L "+(i+b)+","+(h)+" L "+(i)+","+(h-b)+" Z";c=this.renderer.path(l);break;case"triangle_up":var l="M "+(i-b)+","+(h+b)+" L "+(i+b)+","+(h+b)+" L "+(i)+","+(h-b)+" Z";c=this.renderer.path(l);break;case"triangle_down":var l="M "+(i-b)+","+(h-b)+" L "+(i)+","+(h+b)+" L "+(i+b)+","+(h-b)+" Z";c=this.renderer.path(l);break;case"triangle_left":var l="M "+(i-b)+","+(h)+" L "+(i+b)+","+(h+b)+" L "+(i+b)+","+(h-b)+" Z";c=this.renderer.path(l);break;case"triangle_right":var l="M "+(i-b)+","+(h-b)+" L "+(i-b)+","+(h+b)+" L "+(i+b)+","+(h)+" Z";c=this.renderer.path(l);break;default:c=this.renderer.circle(i,h,f)}this.renderer.attr(c,{fill:j,stroke:k,"stroke-width":d,"fill-opacity":e});return c},_getSymbol:function(f,b){var c=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"];var e=this.seriesGroups[f];var d=e.series[b];var h=undefined;if(d.symbolType!=undefined){h=d.symbolType}if(h==undefined){h=e.symbolType}if(h=="default"){return c[b%c.length]}else{if(h!=undefined){return h}}return"none"},_startTooltipTimer:function(h,f,d){this._cancelTooltipTimer();var b=this;var e=b.seriesGroups[h];var c=this.toolTipShowDelay||this.toolTipDelay;if(isNaN(c)||c>10000||c<0){c=500}if(this._toolTipElement){c=0}this._tttimer=setTimeout(function(){b._showToolTip(b._mouseX,b._mouseY-3,h,f,d);var g=b.toolTipHideDelay;if(isNaN(g)){g=4000}b._tttimer=setTimeout(function(){b._hideToolTip()},g)},c)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(c){var b=this.seriesGroups[c];if(b.type.indexOf("area")!=-1){return b.orientation=="horizontal"?"horizontalLinearGradient":"verticalLinearGradient"}else{if(b.type.indexOf("column")!=-1){return b.orientation=="horizontal"?"verticalLinearGradient":"horizontalLinearGradient"}else{if(b.type.indexOf("scatter")!=-1||b.type.indexOf("bubble")!=-1||b.type.indexOf("pie")!=-1||b.type.indexOf("donut")!=-1){return"radialGradient"}}}return undefined},_select:function(d,h,f,c){if(this._selected&&this._selected.element!=d){this._unselect()}this._selected={element:d,group:h,series:f,item:c};var e=this.seriesGroups[h];var b=this._getColors(h,f,c,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1){b.fillSelected="none"}this.renderer.attr(d,{stroke:b.lineSelected,fill:b.fillSelected})},_unselect:function(){if(this._selected){var h=this._selected.group;var f=this._selected.series;var c=this._selected.item;var e=this.seriesGroups[h];var d=e.series[f];var b=this._getColors(h,f,c,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1){b.fillColor="none"}this.renderer.attr(this._selected.element,{stroke:b.lineColor,fill:b.fillColor});if(e.type.indexOf("line")!=-1||e.type.indexOf("area")!=-1&&!isNaN(c)){this._raiseEvent("mouseout",e,d,c)}this._selected=undefined}if(this._pointMarker){this.renderer.removeElement(this._pointMarker.element);this._pointMarker=undefined}},_raiseEvent:function(e,f,d,b){var c=d[e]||f[e];var g=0;for(;g<this.seriesGroups.length;g++){if(this.seriesGroups[g]==f){break}}if(g==this.seriesGroups.length){return}if(c&&a.isFunction(c)){c({event:e,seriesGroup:f,serie:d,elementIndex:b,elementValue:this._getDataValue(b,d.dataField,g)})}},_calcGroupOffsets:function(l,c){var r=this.seriesGroups[l];if(!r.series||r.series.length==0){return}var f=r.valueAxis.flip==true;var b=r.valueAxis.logarithmicScale==true;var m=r.valueAxis.logarithmicScaleBase||10;if(!this._renderData){this._renderData=new Array()}while(this._renderData.length<l+1){this._renderData.push(null)}if(this._renderData[l]!=null){return this._renderData[l]}var J=new Array();var s=r.type.indexOf("stacked")!=-1;var e=s&&r.type.indexOf("100")!=-1;var p=this._getDataLen(l);var L=r.baselineValue||r.valueAxis.baselineValue||0;var M=this._stats.seriesGroups[l];if(!M||!M.isValid){return}if(L>M.max){L=M.max}if(L<M.min){L=M.min}var C=(e||b)?M.maxRange:M.max-M.min;var E=M.min;var I=M.max;var N=c.height/(b?M.intervals:C);var g=0;if(e){if(E*I<0){C/=2;g=-(C+L)*N}else{g=-L*N}}else{g=-(L-E)*N}if(f){g=-g+c.y}else{g+=c.y+c.height}var z=new Array();var d=new Array();var D,o;if(b){D=a.jqx.log(I,m)-a.jqx.log(L,m);if(s){D=M.intervals;L=e?0:E}o=M.intervals-D;g=c.y+D/M.intervals*c.height}g=a.jqx._ptrnd(g);var n=(E*I<0)?c.height/2:c.height;var w=[];for(var G=0;G<r.series.length;G++){if(!s&&b){w=[]}J.push(new Array());for(var H=0;H<p;H++){var O=this._getDataValueAsNumber(H,r.series[G].dataField,l);if(isNaN(O)||(b&&O<=0)){J[G].push({from:undefined,to:undefined});continue}if(O>M.rmax){O=M.rmax}if(O<M.rmin){O=M.rmin}var q=(O>L)?z:d;var K=N*(O-L);if(b){while(w.length<=H){w.push({p:{value:0,height:0},n:{value:0,height:0}})}var A=O>L?w[H].p:w[H].n;A.value+=O;if(e){O=A.value/(M.psums[H]+M.nsums[H])*100;K=(a.jqx.log(O,m)-M.minPow)*N}else{K=a.jqx.log(A.value,m)-a.jqx.log(L,m);K*=N}K-=A.height;A.height+=K}var v=g;if(s){if(e&&!b){var t=(M.psums[H]-M.nsums[H]);if(O>L){K=(M.psums[H]/t)*n;if(M.psums[H]!=0){K*=O/M.psums[H]}}else{K=(M.nsums[H]/t)*n;if(M.nsums[H]!=0){K*=O/M.nsums[H]}}}if(isNaN(q[H])){q[H]=g}v=q[H]}K=Math.abs(K);K=this._isVML?Math.round(K):a.jqx._rup(K);if(G==r.series.length-1&&e){var u=0;for(var F=0;F<G;F++){u+=Math.abs(J[F][H].to-J[F][H].from)}u+=K;if(u<n){if(K>0.5){K=a.jqx._ptrnd(K+n-u)}else{var F=G-1;while(F>=0){var B=Math.abs(J[F][H].to-J[F][H].from);if(B>1){if(J[F][H].from>J[F][H].to){J[F][H].from+=n-u}break}F--}}}}if(f){K*=-1}if(O<L){q[H]+=K;J[G].push({from:v,to:v+K-1})}else{q[H]-=K;J[G].push({from:v,to:v-K})}}}this._renderData[l]={baseOffset:g,offsets:J};this._renderData[l].xoffsets=this._calculateXOffsets(l,c);return this._renderData[l]},_isPointSeriesOnly:function(){for(var b=0;b<this.seriesGroups.length;b++){var c=this.seriesGroups[b];if(c.type.indexOf("line")==-1&&c.type.indexOf("area")==-1&&c.type.indexOf("scatter")==-1&&c.type.indexOf("bubble")==-1){return false}}return true},_alignValuesWithTicks:function(f){var b=this._isPointSeriesOnly();var e=this._getCategoryAxis(f);var d=e.valuesOnTicks==undefined?b:e.valuesOnTicks!=false;if(f==undefined){return d}var c=this.seriesGroups[f];if(c.valuesOnTicks==undefined){return d}return c.valuesOnTicks},_getYearsDiff:function(c,b){return b.getFullYear()-c.getFullYear()},_getMonthsDiff:function(c,b){return 12*(b.getFullYear()-c.getFullYear())+b.getMonth()-c.getMonth()},_getDaysDiff:function(c,b){return(b.valueOf()-c.valueOf())/(1000*24*3600)},_getDateDiff:function(e,d,c){var b=0;if(c=="year"){b=this._getYearsDiff(e,d)}else{if(c=="month"){b=this._getMonthsDiff(e,d)}else{b=this._getDaysDiff(e,d)}}return b},_getDatesArray:function(d,k,m,l){var f=[];var g=this._getDateDiff(d,k,m)+1;if(m=="year"){if(l){g++}var b=d.getFullYear();for(var e=0;e<g;e++){f.push(new Date(b,0,1,0,0,0,0));b++}}else{if(m=="month"){if(l){g++}var h=d.getMonth();var j=d.getFullYear();for(var e=0;e<g;e++){f.push(new Date(j,h,1,0,0,0,0));h++;if(h>11){j++;h=0}}}else{if(m=="day"){for(var e=0;e<g;e++){var c=new Date(d.valueOf()+e*1000*3600*24);f.push(c)}}}}return f},_calculateXOffsets:function(c,b){var j=this._getCategoryAxis(c);var u=new Array();var h=this._getDataLen(c);var D=j.type=="date";var m=D?this._castAsDate(j.minValue):this._castAsNumber(j.minValue);var o=D?this._castAsDate(j.maxValue):this._castAsNumber(j.maxValue);var s=m,v=o;if(isNaN(s)||isNaN(v)){for(var w=0;w<h;w++){var q=this._getDataValue(w,j.dataField,c);q=D?this._castAsDate(q):this._castAsNumber(q);if(q==undefined||isNaN(q)){continue}if(q<s||isNaN(s)){s=q}if(q>v||isNaN(v)){v=q}}}s=m||s;v=o||v;if(D&&!(this._isDate(s)&&this._isDate(v))){throw"Invalid Date values"}var r=(j.maxValue!=undefined)||(j.minValue!=undefined);if(r&&(isNaN(v)||isNaN(s))){r=false;throw"Invalid min/max category values"}if(!r&&!D){s=0;v=h-1}var A=j.unitInterval;if(isNaN(A)||A<=0){A=1}var E=NaN;var g=this._alignValuesWithTicks(c);if(r){if(g){E=v-s}else{E=v-s+A}}else{E=h-1;if(!g){E++}}if(E==0){E=A}var t=0;var C=v;var z=s;if(D){E=this._getDateDiff(z,C,j.baseUnit);E=a.jqx._rnd(E,1,false);if(!g||(g&&(j.baseUnit=="month"||j.baseUnit=="year"))){E++}if(j.baseUnit!="day"){if(j.baseUnit=="month"){z=new Date(z.getFullYear(),z.getMonth(),1);C=new Date(z);C.setMonth(C.getMonth()+E)}else{z=new Date(z.getFullYear(),0,1);C=new Date(z);C.setYear(C.getFullYear()+E)}}t=a.jqx._rnd(this._getDateDiff(z,C,"day"),1,false);if(!g){t++}}var f=Math.max(1,E/A);var d=b.width/f;var p=c!=undefined&&this.seriesGroups[c].type.indexOf("column")!=-1;var l=0;if(!g&&(!D||j.baseUnit=="day")&&!p){l=d/2}var e=-1,k=-1;for(var w=0;w<h;w++){if(!r&&!D){u.push(a.jqx._ptrnd(l+(w-z)/E*b.width));if(e==-1){e=w}if(k==-1||k<w){k=w}continue}var q=this._getDataValue(w,j.dataField,c);q=D?this._castAsDate(q):this._castAsNumber(q);if(isNaN(q)||q<z||q>C){u.push(-1);continue}var B=D?a.jqx._rnd(this._getDateDiff(z,q,"day"),1,false):q-z;var n=a.jqx._ptrnd(l+B/(D?t:E)*b.width);u.push(n);if(e==-1){e=w}if(k==-1||k<w){k=w}}if(j.flip==true){u.reverse()}return{data:u,first:e,last:k,length:k==-1?0:k-e+1,itemWidth:d,rangeLength:E,min:s,max:v,customRange:r}},_getCategoryAxis:function(b){if(b==undefined||this.seriesGroups.length<=b){return this.categoryAxis}return this.seriesGroups[b].categoryAxis||this.categoryAxis},_isGreyScale:function(e,b){var d=this.seriesGroups[e];var c=d.series[b];if(c.greyScale==true){return true}else{if(c.greyScale==false){return false}}if(d.greyScale==true){return true}else{if(d.greyScale==false){return false}}return this.greyScale==true},_getSeriesColor:function(d,c){var b=this._getSeriesColorInternal(d,c);if(this._isGreyScale(d,c)&&b.indexOf("#")==0){b=a.jqx.toGreyScale(b)}return b},_getSeriesColorInternal:function(l,c){var e=this.seriesGroups[l];var m=e.series[c];if(m.color){return m.color}var k=0;for(var d=0;d<=l;d++){for(var b in this.seriesGroups[d].series){if(d==l&&b==c){break}else{k++}}}var h=this.colorScheme;if(e.colorScheme){h=e.colorScheme;sidex=c}if(h==undefined||h==""){h=this.colorSchemes[0].name}if(h){for(var d=0;d<this.colorSchemes.length;d++){var f=this.colorSchemes[d];if(f.name==h){while(k>f.colors.length){k-=f.colors.length;if(++d>=this.colorSchemes.length){d=0}f=this.colorSchemes[d]}return f.colors[k%f.colors.length]}}}return"#222222"},_getColor:function(d,f,k,h){if(d==undefined||d==""){d=this.colorSchemes[0].name}for(var g=0;g<this.colorSchemes.length;g++){if(d==this.colorSchemes[g].name){break}}var e=0;while(e<=f){if(g==this.colorSchemes.length){g=0}var b=this.colorSchemes[g].colors.length;if(e+b<=f){e+=b;g++}else{var c=this.colorSchemes[g].colors[f-e];if(this._isGreyScale(k,h)&&c.indexOf("#")==0){c=a.jqx.toGreyScale(c)}return c}}},getColorScheme:function(b){for(var c in this.colorSchemes){if(this.colorSchemes[c].name==b){return this.colorSchemes[c].colors}}return undefined},addColorScheme:function(c,b){for(var d in this.colorSchemes){if(this.colorSchemes[d].name==c){this.colorSchemes[d].colors=b;return}}this.colorSchemes.push({name:c,colors:b})},removeColorScheme:function(b){for(var c in this.colorSchemes){if(this.colorSchemes[c].name==b){this.colorSchemes.splice(c,1);break}}},colorSchemes:[{name:"scheme01",colors:["#4572A7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#2F2933","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]}],_formatValue:function(c,f,b){if(c==undefined){return""}if(b){if(!a.isFunction(b)){return c.toString()}try{return b(c)}catch(d){return d.message}}if(this._isNumber(c)){return this._formatNumber(c,f)}if(this._isDate(c)){return this._formatDate(c,f)}if(f){return(f.prefix||"")+c.toString()+(f.sufix||"")}return c.toString()},_getFormattedValue:function(k,e,b,c,d){var h=this.seriesGroups[k];var m=h.series[e];var l="";var f=c,i=d;if(!i){i=m.formatFunction||h.formatFunction}if(!f){f=m.formatSettings||h.formatSettings}if(!m.formatFunction&&m.formatSettings){i=undefined}var j=this._getDataValue(b,m.dataField,k);if(j){l=this._formatValue(j,f,i)}return l||""},_isNumberAsString:function(d){if(typeof(d)!="string"){return false}d=a.trim(d);for(var b=0;b<d.length;b++){var c=d.charAt(b);if((c>="0"&&c<="9")||c==","||c=="."){continue}if(c=="-"&&b==0){continue}if((c=="("&&b==0)||(c==")"&&b==d.length-1)){continue}return false}return true},_castAsDate:function(c){if(c instanceof Date&&!isNaN(c)){return c}if(typeof(c)=="string"){var b=new Date(c);if(b!=undefined){return b}}return undefined},_castAsNumber:function(c){if(c instanceof Date&&!isNaN(c)){return c.valueOf()}if(typeof(c)=="string"){if(this._isNumber(c)){c=parseFloat(c)}else{var b=new Date(c);if(b!=undefined){c=b.valueOf()}}}return c},_isNumber:function(b){if(typeof(b)=="string"){if(this._isNumberAsString(b)){b=parseFloat(b)}}return typeof b==="number"&&isFinite(b)},_isDate:function(b){return b instanceof Date},_isBoolean:function(b){return typeof b==="boolean"},_isObject:function(b){return(b&&(typeof b==="object"||a.isFunction(b)))||false},_formatDate:function(c,b){return c.toString()},_formatNumber:function(n,e){if(!this._isNumber(n)){return n}e=e||{};var q=e.decimalSeparator||".";var o=e.thousandsSeparator||"";var m=e.prefix||"";var p=e.sufix||"";var h=e.decimalPlaces||((n*100!=parseInt(n)*100)?2:0);var l=e.negativeWithBrackets||false;var g=(n<0);if(g&&l){n*=-1}var d=n.toString();var b;var k=Math.pow(10,h);d=(Math.round(n*k)/k).toString();if(isNaN(d)){d=""}b=d.lastIndexOf(".");if(h>0){if(b<0){d+=q;b=d.length-1}else{if(q!=="."){d=d.replace(".",q)}}while((d.length-1-b)<h){d+="0"}}b=d.lastIndexOf(q);b=(b>-1)?b:d.length;var f=d.substring(b);var c=0;for(var j=b;j>0;j--,c++){if((c%3===0)&&(j!==b)&&(!g||(j>1)||(g&&l))){f=o+f}f=d.charAt(j-1)+f}d=f;if(g&&l){d="("+d+")"}return m+d+p},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:false},_getBezierPoints:function(g){var k=[];var h=g.split(" ");for(var f=0;f<h.length;f++){var l=h[f].split(",");k.push({x:parseFloat(l[0]),y:parseFloat(l[1])})}var m="";for(var f=0;f<k.length-1;f++){var b=[];if(0==f){b.push(k[f]);b.push(k[f]);b.push(k[f+1]);b.push(k[f+2])}else{if(k.length-2==f){b.push(k[f-1]);b.push(k[f]);b.push(k[f+1]);b.push(k[f+1])}else{b.push(k[f-1]);b.push(k[f]);b.push(k[f+1]);b.push(k[f+2])}}var d=[];var j=f==0?81:9;var e={x:((-b[0].x+j*b[1].x+b[2].x)/j),y:((-b[0].y+j*b[1].y+b[2].y)/j)};var c={x:((b[1].x+j*b[2].x-b[3].x)/j),y:((b[1].y+j*b[2].y-b[3].y)/j)};d.push({x:b[1].x,y:b[1].y});d.push(e);d.push(c);d.push({x:b[2].x,y:b[2].y});if(f==0){d[1].x++;d[1].y++}m+="C"+a.jqx._ptrnd(d[1].x)+","+a.jqx._ptrnd(d[1].y)+" "+a.jqx._ptrnd(d[2].x)+","+a.jqx._ptrnd(d[2].y)+" "+a.jqx._ptrnd(d[3].x)+","+a.jqx._ptrnd(d[3].y)+" "}return m},_animTickInt:50,_createAnimationGroup:function(b){if(!this._animGroups){this._animGroups={}}this._animGroups[b]={animations:[],startTick:NaN}},_startAnimation:function(c){var e=new Date();var b=e.getTime();this._animGroups[c].startTick=b;this._enableAnimTimer()},_enqueueAnimation:function(e,d,c,g,f,b,h){if(g==0){g=1}if(h==undefined){h="easeInOutSine"}this._animGroups[e].animations.push({key:d,properties:c,duration:g,fn:f,context:b,easing:h})},_stopAnimations:function(){clearTimeout(this._animtimer);this._animtimer=undefined;this._animGroups=undefined},_enableAnimTimer:function(){if(!this._animtimer){var b=this;this._animtimer=setTimeout(function(){b._runAnimation()},this._animTickInt)}},_runAnimation:function(){if(this._animGroups){var s=new Date();var k=s.getTime();var o={};for(var l in this._animGroups){var r=this._animGroups[l].animations;var m=this._animGroups[l].startTick;var h=0;for(var n=0;n<r.length;n++){var t=r[n];var b=(k-m);if(t.duration>h){h=t.duration}var q=t.duration>0?b/t.duration:0;var e=q;if(t.easing){e=jQuery.easing[t.easing](q,b,0,1,t.duration)}if(q>1){q=1;e=1}if(t.fn){t.fn(t.key,t.context,e);continue}var g={};for(var l=0;l<t.properties.length;l++){var c=t.properties[l];var f=0;if(q==1){f=c.to}else{f=e*(c.to-c.from)+c.from}g[c.key]=f}this.renderer.attr(t.key,g)}if(m+h>k){o[l]=({startTick:m,animations:r})}}this._animGroups=o;if(this.renderer instanceof a.jqx.HTML5Renderer){this.renderer.refresh()}}this._animtimer=null;for(var l in this._animGroups){this._enableAnimTimer();break}}});a.jqx.toGreyScale=function(b){var c=a.jqx.cssToRgb(b);c[0]=c[1]=c[2]=Math.round(0.3*c[0]+0.59*c[1]+0.11*c[2]);var d=a.jqx.rgbToHex(c[0],c[1],c[2]);return"#"+d[0]+d[1]+d[2]},a.jqx._adjustColor=function(d,b){var e=a.jqx.cssToRgb(d);var d="#";for(var f=0;f<3;f++){var g=Math.round(b*e[f]);if(g>255){g=255}else{if(g<=0){g=0}}g=a.jqx.decToHex(g);if(g.toString().length==1){d+="0"}d+=g}return d.toUpperCase()};a.jqx.decToHex=function(b){return b.toString(16)},a.jqx.hexToDec=function(b){return parseInt(b,16)};a.jqx.rgbToHex=function(e,d,c){return[a.jqx.decToHex(e),a.jqx.decToHex(d),a.jqx.decToHex(c)]};a.jqx.hexToRgb=function(c,d,b){return[a.jqx.hexToDec(c),a.jqx.hexToDec(d),a.jqx.hexToDec(b)]};a.jqx.cssToRgb=function(b){if(b.indexOf("rgb")<=-1){return a.jqx.hexToRgb(b.substring(1,3),b.substring(3,5),b.substring(5,7))}return b.substring(4,b.length-1).split(",")};a.jqx.swap=function(b,d){var c=b;b=d;d=c};a.jqx.getNum=function(b){if(!a.isArray(b)){if(isNaN(b)){return 0}}else{for(var c=0;c<b.length;c++){if(!isNaN(b[c])){return b[c]}}}return 0};a.jqx._ptrnd=function(c){if(!document.createElementNS){if(Math.round(c)==c){return c}return a.jqx._rnd(c,1,false)}if(Math.abs(Math.round(c)-c)==0.5){return c}var b=a.jqx._rnd(c,1,false);return b-0.5};a.jqx._rup=function(c){var b=Math.round(c);if(c>b){b++}return b};a.jqx.log=function(c,b){return Math.log(c)/(b?Math.log(b):1)};a.jqx._rnd=function(c,e,d){if(isNaN(c)){return c}var b=c-c%e;if(c==b){return b}if(d){if(c>b){b+=e}}else{if(b>c){b-=e}}return b};a.jqx.commonRenderer={pieSlicePath:function(j,i,g,q,z,A,d){if(!q){q=1}var l=Math.abs(z-A);var o=l>180?1:0;if(l>=360){A=z+359.99}var p=z*Math.PI*2/360;var h=A*Math.PI*2/360;var v=j,u=j,f=i,e=i;var m=!isNaN(g)&&g>0;if(m){d=0}if(d+g>0){if(d>0){var k=l/2+z;var w=k*Math.PI*2/360;j+=d*Math.cos(w);i-=d*Math.sin(w)}if(m){var t=g;v=j+t*Math.cos(p);f=i-t*Math.sin(p);u=j+t*Math.cos(h);e=i-t*Math.sin(h)}}var s=j+q*Math.cos(p);var r=j+q*Math.cos(h);var c=i-q*Math.sin(p);var b=i-q*Math.sin(h);var n="";if(m){n="M "+u+","+e;n+=" a"+g+","+g;n+=" 0 "+o+",1 "+(v-u)+","+(f-e);n+=" L"+s+","+c;n+=" a"+q+","+q;n+=" 0 "+o+",0 "+(r-s)+","+(b-c)}else{n="M "+r+","+b;n+=" a"+q+","+q;n+=" 0 "+o+",1 "+(s-r)+","+(c-b);n+=" L"+j+","+i+" Z"}return n}};a.jqx.svgRenderer=function(){};a.jqx.svgRenderer.prototype={_svgns:"http://www.w3.org/2000/svg",init:function(f){var d="<table id=tblChart cellspacing='0' cellpadding='0' border='0' align='left' valign='top'><tr><td colspan=2 id=tdTop></td></tr><tr><td id=tdLeft></td><td class='chartContainer'></td></tr></table>";f.append(d);this.host=f;var b=f.find(".chartContainer");b[0].style.width=f.width()+"px";b[0].style.height=f.height()+"px";var h;try{var c=document.createElementNS(this._svgns,"svg");c.setAttribute("id","svgChart");c.setAttribute("version","1.1");c.setAttribute("width","100%");c.setAttribute("height","100%");b[0].appendChild(c);this.canvas=c}catch(g){return false}this._id=new Date().getTime();this.clear();this._layout();this._runLayoutFix();return true},_runLayoutFix:function(){var b=this;this._fixLayout()},_fixLayout:function(){var g=a(this.canvas).position();var d=(parseFloat(g.left)==parseInt(g.left));var b=(parseFloat(g.top)==parseInt(g.top));if(a.jqx.browser.msie){var d=true,b=true;var e=this.host;var c=0,f=0;while(e&&e.position&&e[0].parentNode){var h=e.position();c+=parseFloat(h.left)-parseInt(h.left);f+=parseFloat(h.top)-parseInt(h.top);e=e.parent()}d=parseFloat(c)==parseInt(c);b=parseFloat(f)==parseInt(f)}if(!d){this.host.find("#tdLeft")[0].style.width="0.5px"}if(!b){this.host.find("#tdTop")[0].style.height="0.5px"}},_layout:function(){var c=a(this.canvas).offset();var b=this.host.find(".chartContainer");this._width=Math.max(a.jqx._rup(this.host.width())-1,0);this._height=Math.max(a.jqx._rup(this.host.height())-1,0);b[0].style.width=this._width;b[0].style.height=this._height;this._fixLayout()},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0){this.canvas.removeChild(this.canvas.firstElementChild)}this._defs=document.createElementNS(this._svgns,"defs");this._gradients={};this.canvas.appendChild(this._defs)},removeElement:function(c){if(c!=undefined){try{if(c.parentNode){c.parentNode.removeChild(c)}else{this.canvas.removeChild(c)}}catch(b){}}},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElementNS(this._svgns,"g");b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0){return}this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(d){var e=document.createElementNS(this._svgns,"clipPath");var b=document.createElementNS(this._svgns,"rect");this.attr(b,{x:d.x,y:d.y,width:d.width,height:d.height});this._clipId=this._clipId||0;e.id="cl"+this._id+"_"+(++this._clipId).toString();e.appendChild(b);this._defs.appendChild(e);return e},setClip:function(c,b){return this.attr(c,{"clip-path":"url(#"+b.id+")"})},_clipId:0,addHandler:function(b,d,c){b["on"+d]=c},shape:function(b,e){var c=document.createElementNS(this._svgns,b);if(!c){return undefined}for(var d in e){c.setAttribute(d,e[d])}this._activeParent().appendChild(c);return c},measureText:function(m,d,e){var g=document.createElementNS(this._svgns,"text");this.attr(g,e);g.appendChild(g.ownerDocument.createTextNode(m));var l=this._activeParent();l.appendChild(g);var n=g.getBBox();if(isNaN(n.width)||isNaN(n.height)||Math.abs(n.width)==Infinity||Math.abs(n.height)==Infinity){return{width:0,height:0}}var h=a.jqx._rup(n.width);var b=a.jqx._rup(n.height);l.removeChild(g);if(d==0){return{width:h,height:b}}var j=d*Math.PI*2/360;var c=Math.abs(Math.sin(j));var i=Math.abs(Math.cos(j));var f=Math.abs(h*c+b*i);var k=Math.abs(h*i+b*c);return{width:a.jqx._rup(k),height:a.jqx._rup(f)}},text:function(r,o,m,v,t,D,F,E,q,i){var u;if(!q){q="center"}if(!i){i="center"}if(E){u=this.beginGroup();var e=this.createClipRect({x:a.jqx._rup(o)-1,y:a.jqx._rup(m)-1,width:a.jqx._rup(v)+2,height:a.jqx._rup(t)+2});this.setClip(u,e)}var s=document.createElementNS(this._svgns,"text");this.attr(s,F);s.appendChild(s.ownerDocument.createTextNode(r));var l=this._activeParent();l.appendChild(s);var b=s.getBBox();l.removeChild(s);var G=b.width;var j=b.height*0.6;var p=v||0;var B=t||0;if(!D||D==0){if(q=="center"){o+=(p-G)/2}else{if(q=="right"){o+=(p-G)}}m+=j;if(i=="center"){m+=(B-j)/2}else{if(i=="bottom"){m+=B-j}}if(!v){v=G}if(!t){t=j}this.attr(s,{x:a.jqx._rup(o),y:a.jqx._rup(m),width:a.jqx._rup(v),height:a.jqx._rup(t),cursor:"default"});l.appendChild(s);this.endGroup();return s}var f=D*Math.PI*2/360;var C=Math.sin(f);var g=Math.cos(f);var k=j*g+G*C;var n=G*g+j*C;var z=m;var d=o;o+=(v-n)/2;m+=(t-k)/2;m+=j*g;if(q=="left"){if(g>0){o=d;if(C<0){o-=C*j}}else{o=d-g*G;if(C<0){o-=C*j}}}else{if(q=="right"){if(g>0){o=d+v-n;if(C<0){o+=C*j}}else{o=d+v;if(C>=0){o-=C*j}}}}if(i=="top"){if(C<0){m=z-C*G;if(g>0){m+=g*j}}else{m=z;if(g>0){m=z+j*g}}}else{if(i=="bottom"){if(C<0){m=z+t;if(g<=0){m+=j*g}}else{m=z+t-G*C;if(g<0){m+=j*g}}}}o=a.jqx._rup(o);m=a.jqx._rup(m);var A=this.shape("g",{transform:"translate("+o+","+m+")"});var c=this.shape("g",{transform:"rotate("+D+")"});A.appendChild(c);c.appendChild(s);l.appendChild(A);this.endGroup();return A},line:function(d,f,c,e,g){var b=this.shape("line",{x1:d,y1:f,x2:c,y2:e});this.attr(b,g)},path:function(c,d){var b=this.shape("path");b.setAttribute("d",c);if(d){this.attr(b,d)}return b},rect:function(b,g,c,e,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);e=a.jqx._rup(e);var d=this.shape("rect",{x:b,y:g,width:c,height:e});if(f){this.attr(d,f)}return d},circle:function(b,d,c){return this.shape("circle",{cx:b,cy:d,r:c})},pieSlicePath:function(c,h,g,e,f,d,b){return a.jqx.commonRenderer.pieSlicePath(c,h,g,e,f,d,b)},pieslice:function(j,h,g,d,f,b,i,c){var e=this.pieSlicePath(j,h,g,d,f,b,i);var k=this.shape("path");k.setAttribute("d",e);if(c){this.attr(k,c)}return k},attr:function(b,d){if(!b||!d){return}for(var c in d){if(c=="textContent"){b.textContent=d[c]}else{b.setAttribute(c,d[c])}}},getAttr:function(c,b){return c.getAttribute(b)},_gradients:{},_toLinearGradient:function(e,g,h){var c="grd"+e.replace("#","")+(g?"v":"h");var b="url(#"+c+")";if(this._gradients[b]){return b}var d=document.createElementNS(this._svgns,"linearGradient");this.attr(d,{x1:"0%",y1:"0%",x2:g?"0%":"100%",y2:g?"100%":"0%",id:c});for(var f in h){var j=document.createElementNS(this._svgns,"stop");var i="stop-color:"+a.jqx._adjustColor(e,h[f][1]);this.attr(j,{offset:h[f][0]+"%",style:i});d.appendChild(j)}this._defs.appendChild(d);this._gradients[b]=true;return b},_toRadialGradient:function(e,h,g){var c="grd"+e.replace("#","")+"r"+(g!=undefined?g.key:"");var b="url(#"+c+")";if(this._gradients[b]){return b}var d=document.createElementNS(this._svgns,"radialGradient");if(g==undefined){this.attr(d,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:c})}else{this.attr(d,{cx:g.x1,cy:g.y1,r:g.outerRadius,id:c,gradientUnits:"userSpaceOnUse"})}for(var f in h){var j=document.createElementNS(this._svgns,"stop");var i="stop-color:"+a.jqx._adjustColor(e,h[f][1]);this.attr(j,{offset:h[f][0]+"%",style:i});d.appendChild(j)}this._defs.appendChild(d);this._gradients[b]=true;return b}};a.jqx.vmlRenderer=function(){};a.jqx.vmlRenderer.prototype={init:function(g){var f="<div class='chartContainer' style=\"position:relative;overflow:hidden;\"><div>";g.append(f);this.host=g;var b=g.find(".chartContainer");b[0].style.width=g.width()+"px";b[0].style.height=g.height()+"px";var d=true;try{for(var c=0;c<document.namespaces.length;c++){if(document.namespaces[c].name=="v"&&document.namespaces[c].urn=="urn:schemas-microsoft-com:vml"){d=false;break}}}catch(h){return false}if(a.jqx.browser.msie&&parseInt(a.jqx.browser.version)<9&&(document.childNodes&&document.childNodes.length>0&&document.childNodes[0].data&&document.childNodes[0].data.indexOf("DOCTYPE")!=-1)){if(d){document.namespaces.add("v","urn:schemas-microsoft-com:vml")}this._ie8mode=true}else{if(d){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().cssText="v\\:* { behavior: url(#default#VML); display: inline-block; }"}}this.canvas=b[0];this._width=Math.max(a.jqx._rup(b.width()),0);this._height=Math.max(a.jqx._rup(b.height()),0);b[0].style.width=this._width+2;b[0].style.height=this._height+2;this._id=new Date().getTime();this.clear();return true},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0){this.canvas.removeChild(this.canvas.firstElementChild)}this._gradients={}},removeElement:function(b){if(b!=null){b.parentNode.removeChild(b)}},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElement("v:group");c.style.position="absolute";c.coordorigin="0,0";c.coordsize=this._width+","+this._height;c.style.left=0;c.style.top=0;c.style.width=this._width;c.style.height=this._height;b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0){return}this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(b){var c=document.createElement("div");c.style.height=b.height+"px";c.style.width=b.width+"px";c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.overflow="hidden";this._clipId=this._clipId||0;c.id="cl"+this._id+"_"+(++this._clipId).toString();this._activeParent().appendChild(c);return c},setClip:function(c,b){b.appendChild(c)},_clipId:0,addHandler:function(b,d,c){a(b).on(d,c)},measureText:function(o,d,e){var f=document.createElement("v:textbox");var m=document.createElement("span");m.appendChild(document.createTextNode(o));f.appendChild(m);if(e["class"]){m.className=e["class"]}var n=this._activeParent();n.appendChild(f);var h=a(f);var i=a.jqx._rup(h.width());var b=a.jqx._rup(h.height());n.removeChild(f);if(b==0&&a.jqx.browser.msie&&parseInt(a.jqx.browser.version)<9){var p=h.css("font-size");if(p){b=parseInt(p);if(isNaN(b)){b=0}}}if(d==0){return{width:i,height:b}}var k=d*Math.PI*2/360;var c=Math.abs(Math.sin(k));var j=Math.abs(Math.cos(k));var g=Math.abs(i*c+b*j);var l=Math.abs(i*j+b*c);return{width:a.jqx._rup(l),height:a.jqx._rup(g)}},text:function(o,l,k,r,p,A,C,B,n,g){var s=C.stroke||"black";var q;if(!n){n="center"}if(!g){g="center"}B=false;if(B){q=this.beginGroup();var e=this.createClipRect({x:a.jqx._rup(l),y:a.jqx._rup(k),width:a.jqx._rup(r),height:a.jqx._rup(p)});this.setClip(q,e)}var b=document.createElement("v:textbox");b.style.position="absolute";var t=document.createElement("span");t.appendChild(document.createTextNode(o));if(C["class"]){t.className=C["class"]}b.appendChild(t);var j=this._activeParent();j.appendChild(b);var D=a(b).width();var i=a(b).height();j.removeChild(b);var m=r||0;var v=p||0;if(!A||A==0||Math.abs(A)!=90){if(n=="center"){l+=(m-D)/2}else{if(n=="right"){l+=(m-D)}}if(g=="center"){k=k+(v-i)/2}else{if(g=="bottom"){k=k+v-i}}if(!r){r=D}if(!p){p=i}if(!q){b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.width=a.jqx._rup(r);b.style.height=a.jqx._rup(p)}j.appendChild(b);if(q){this.endGroup();return j}return b}var f=A*Math.PI*2/360;var d=Math.abs(D*Math.sin(f)-i*Math.cos(f));var z=Math.abs(D*Math.cos(f)+i*Math.sin(f));if(n=="center"){l+=(m-z)/2}else{if(n=="right"){l+=(m-z)}}if(g=="center"){k=k+(v-d)/2}else{if(g=="bottom"){k=k+v-d}}l=a.jqx._rup(l);k=a.jqx._rup(k);var u=a.jqx._rup(l+z);var c=a.jqx._rup(k+d);if(Math.abs(A)==90){j.appendChild(b);b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";if(q){this.endGroup();return j}return b}return b},shape:function(b,e){var c=document.createElement(this._createElementMarkup(b));if(!c){return undefined}for(var d in e){c.setAttribute(d,e[d])}this._activeParent().appendChild(c);return c},line:function(e,g,d,f,h){var b="M "+e+","+g+" L "+d+","+f+" X E";var c=this.path(b);this.attr(c,h);return c},_createElementMarkup:function(b){var c="<v:"+b+' style=""></v:'+b+">";if(this._ie8mode){c=c.replace('style=""','style="behavior: url(#default#VML);"')}return c},path:function(c,e){var b=document.createElement(this._createElementMarkup("shape"));b.style.position="absolute";b.coordsize=this._width+" "+this._height;b.coordorigin="0 0";b.style.width=parseInt(this._width);b.style.height=parseInt(this._height);b.style.left=0;b.style.top=0;var d=document.createElement(this._createElementMarkup("path"));d.v=c;b.appendChild(d);this._activeParent().appendChild(b);if(e){this.attr(b,e)}return b},rect:function(b,g,c,d,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);d=a.jqx._rup(d);var e=this.shape("rect",f);e.style.position="absolute";e.style.left=b;e.style.top=g;e.style.width=c;e.style.height=d;e.strokeweight=0;return e},circle:function(b,e,d){var c=this.shape("oval");b=a.jqx._ptrnd(b-d);e=a.jqx._ptrnd(e-d);d=a.jqx._rup(d);c.style.position="absolute";c.style.left=b;c.style.top=e;c.style.width=d*2;c.style.height=d*2;return c},updateCircle:function(d,b,e,c){if(b==undefined){b=parseFloat(d.style.left)+parseFloat(d.style.width)/2}if(e==undefined){e=parseFloat(d.style.top)+parseFloat(d.style.height)/2}if(c==undefined){c=parseFloat(d.width)/2}b=a.jqx._ptrnd(b-c);e=a.jqx._ptrnd(e-c);c=a.jqx._rup(c);d.style.left=b;d.style.top=e;d.style.width=c*2;d.style.height=c*2},pieSlicePath:function(k,j,h,r,B,C,d){if(!r){r=1}var m=Math.abs(B-C);var p=m>180?1:0;if(m>360){B=0;C=360}var q=B*Math.PI*2/360;var i=C*Math.PI*2/360;var w=k,v=k,f=j,e=j;var n=!isNaN(h)&&h>0;if(n){d=0}if(d>0){var l=m/2+B;var A=l*Math.PI*2/360;k+=d*Math.cos(A);j-=d*Math.sin(A)}if(n){var u=h;w=a.jqx._ptrnd(k+u*Math.cos(q));f=a.jqx._ptrnd(j-u*Math.sin(q));v=a.jqx._ptrnd(k+u*Math.cos(i));e=a.jqx._ptrnd(j-u*Math.sin(i))}var t=a.jqx._ptrnd(k+r*Math.cos(q));var s=a.jqx._ptrnd(k+r*Math.cos(i));var c=a.jqx._ptrnd(j-r*Math.sin(q));var b=a.jqx._ptrnd(j-r*Math.sin(i));r=a.jqx._ptrnd(r);h=a.jqx._ptrnd(h);k=a.jqx._ptrnd(k);j=a.jqx._ptrnd(j);var g=Math.round(B*65535);var z=Math.round(C-B)*65536;var o="";if(n){o="M"+w+" "+f;o+=" AE "+k+" "+j+" "+h+" "+h+" "+g+" "+z;o+=" L "+s+" "+b;g=Math.round(B-C)*65535;z=Math.round(C)*65536;o+=" AE "+k+" "+j+" "+r+" "+r+" "+z+" "+g;o+=" L "+w+" "+f}else{o="M"+k+" "+j;o+=" AE "+k+" "+j+" "+r+" "+r+" "+g+" "+z}o+=" X E";return o},pieslice:function(k,i,h,e,g,b,j,d){var f=this.pieSlicePath(k,i,h,e,g,b,j);var c=this.path(f,d);if(d){this.attr(c,d)}return c},_keymap:[{svg:"fill",vml:"fillcolor"},{svg:"stroke",vml:"strokecolor"},{svg:"stroke-width",vml:"strokeweight"},{svg:"fill-opacity",vml:"fillopacity"},{svg:"opacity",vml:"opacity"},{svg:"cx",vml:"style.left"},{svg:"cy",vml:"style.top"},{svg:"height",vml:"style.height"},{svg:"width",vml:"style.width"},{svg:"x",vml:"style.left"},{svg:"y",vml:"style.top"},{svg:"d",vml:"v"}],_translateParam:function(b){for(var c in this._keymap){if(this._keymap[c].svg==b){return this._keymap[c].vml}}return b},attr:function(c,e){if(!c||!e){return}for(var d in e){var b=this._translateParam(d);if(b=="fillcolor"&&e[d].indexOf("grd")!=-1){c.type=e[d]}else{if(b=="opacity"||b=="fillopacity"){if(c.fill){c.fill.opacity=e[d]}}else{if(b=="textContent"){c.children[0].innerText=e[d]}else{if(b.indexOf("style.")==-1){c[b]=e[d]}else{c.style[b.replace("style.","")]=e[d]}}}}}},getAttr:function(d,c){var b=this._translateParam(c);if(b=="opacity"||b=="fillopacity"){if(d.fill){return d.fill.opacity}else{return 1}}if(b.indexOf("style.")==-1){return d[b]}return d.style[b.replace("style.","")]},_gradients:{},_toRadialGradient:function(b,d,c){return b},_toLinearGradient:function(g,i,j){if(this._ie8mode){return g}var d="grd"+g.replace("#","")+(i?"v":"h");var e="#"+d+"";if(this._gradients[e]){return e}var f=document.createElement(this._createElementMarkup("fill"));f.type="gradient";f.method="linear";f.angle=i?0:90;var c="";for(var h in j){if(h>0){c+=", "}c+=j[h][0]+"% "+a.jqx._adjustColor(g,j[h][1])}f.colors=c;var b=document.createElement(this._createElementMarkup("shapetype"));b.appendChild(f);b.id=d;this.canvas.appendChild(b);return e}};a.jqx.HTML5Renderer=function(){};a.jqx.ptrnd=function(c){if(Math.abs(Math.round(c)-c)==0.5){return c}var b=Math.round(c);if(b<c){b=b-1}return b+0.5};a.jqx.HTML5Renderer.prototype={_elements:{},init:function(b){try{this.host=b;this.host.append("<canvas id='__jqxCanvasWrap' style='width:100%; height: 100%;'/>");this.canvas=b.find("#__jqxCanvasWrap");this.canvas[0].width=b.width();this.canvas[0].height=b.height();this.ctx=this.canvas[0].getContext("2d")}catch(c){return false}return true},getContainer:function(){if(this.canvas&&this.canvas.length==1){return this.canvas}return undefined},getRect:function(){return{x:0,y:0,width:this.canvas[0].width-1,height:this.canvas[0].height-1}},beginGroup:function(){},endGroup:function(){},setClip:function(){},createClipRect:function(b){},addHandler:function(b,d,c){},clear:function(){this._elements={};this._maxId=0;this._renderers._gradients={};this._gradientId=0},removeElement:function(b){if(this._elements[b.id]){delete this._elements[b,id]}},_maxId:0,shape:function(b,e){var c={type:b,id:this._maxId++};for(var d in e){c[d]=e[d]}this._elements[c.id]=c;return c},attr:function(b,d){for(var c in d){b[c]=d[c]}},rect:function(b,g,c,e,f){if(isNaN(b)){throw'Invalid value for "x"'}if(isNaN(g)){throw'Invalid value for "y"'}if(isNaN(c)){throw'Invalid value for "width"'}if(isNaN(e)){throw'Invalid value for "height"'}var d=this.shape("rect",{x:b,y:g,width:c,height:e});if(f){this.attr(d,f)}return d},path:function(b,d){var c=this.shape("path",d);this.attr(c,{d:b});return c},line:function(c,e,b,d,f){return this.path("M "+c+","+e+" L "+b+","+d,f)},circle:function(b,f,d,e){var c=this.shape("circle",{x:b,y:f,r:d});if(e){this.attr(c,e)}return c},pieSlicePath:function(c,h,g,e,f,d,b){return a.jqx.commonRenderer.pieSlicePath(c,h,g,e,f,d,b)},pieslice:function(j,h,g,e,f,b,i,c){var d=this.path(this.pieSlicePath(j,h,g,e,f,b,i),c);this.attr(d,{x:j,y:h,innerRadius:g,outerRadius:e,angleFrom:f,angleTo:b});return d},_getCSSStyle:function(c){var g=document.styleSheets;try{for(var d=0;d<g.length;d++){for(var b=0;g[d].cssRules&&b<g[d].cssRules.length;b++){if(g[d].cssRules[b].selectorText.indexOf(c)!=-1){return g[d].cssRules[b].style}}}}catch(f){}return{}},measureText:function(o,e,f){var k="Arial";var p="10pt";var m="";if(f["class"]){var b=this._getCSSStyle(f["class"]);if(b.fontSize){p=b.fontSize}if(b.fontFamily){k=b.fontFamily}if(b.fontWeight){m=b.fontWeight}}this.ctx.font=m+" "+p+" "+k;var h=this.ctx.measureText(o).width;var n=document.createElement("span");n.font=this.ctx.font;n.textContent=o;document.body.appendChild(n);var c=n.offsetHeight*0.6;document.body.removeChild(n);if(e==0){return{width:h,height:c}}var j=e*Math.PI*2/360;var d=Math.abs(Math.sin(j));var i=Math.abs(Math.cos(j));var g=Math.abs(h*d+c*i);var l=Math.abs(h*i+c*d);return{width:a.jqx._rup(l),height:a.jqx._rup(g)}},text:function(l,k,i,c,m,e,f,d,g,j){var n=this.shape("text",{text:l,x:k,y:i,width:c,height:m,angle:e,clip:d,halign:g,valign:j});if(f){this.attr(n,f)}n.fontFamily="Arial";n.fontSize="10pt";n.fontWeight="";n.color="#000000";if(f["class"]){var b=this._getCSSStyle(f["class"]);n.fontFamily=b.fontFamily||n.fontFamily;n.fontSize=b.fontSize||n.fontSize;n.fontWeight=b.fontWeight||n.fontWeight;n.color=b.color||n.color}var h=this.measureText(l,0,f);n.textWidth=h.width;n.textHeight=h.height;return n},_toLinearGradient:function(c,g,f){if(this._renderers._gradients[c]){return c}var b=[];for(var e=0;e<f.length;e++){b.push({percent:f[e][0]/100,color:a.jqx._adjustColor(c,f[e][1])})}var d="gr"+this._gradientId++;this.createGradient(d,g?"vertical":"horizontal",b);return d},_toRadialGradient:function(c,f){if(this._renderers._gradients[c]){return c}var b=[];for(var e=0;e<f.length;e++){b.push({percent:f[e][0]/100,color:a.jqx._adjustColor(c,f[e][1])})}var d="gr"+this._gradientId++;this.createGradient(d,"radial",b);return d},_gradientId:0,createGradient:function(d,c,b){this._renderers.createGradient(d,c,b)},_renderers:{_gradients:{},createGradient:function(d,c,b){this._gradients[d]={orientation:c,colorStops:b}},setStroke:function(b,c){b.strokeStyle=c.stroke||"transparent";b.lineWidth=c["stroke-width"]||1},setFillStyle:function(m,e){m.fillStyle="transparent";if(e["fill-opacity"]){m.globalAlpha=e["fill-opacity"]}else{m.globalAlpha=1}if(e.fill&&e.fill.indexOf("#")==-1&&this._gradients[e.fill]){var k=this._gradients[e.fill].orientation!="horizontal";var g=this._gradients[e.fill].orientation=="radial";var c=a.jqx.ptrnd(e.x);var l=a.jqx.ptrnd(e.y);var b=a.jqx.ptrnd(e.x+(k?0:e.width));var h=a.jqx.ptrnd(e.y+(k?e.height:0));var j;if((e.type=="circle"||e.type=="path")&&g){x=a.jqx.ptrnd(e.x);y=a.jqx.ptrnd(e.y);r1=e.innerRadius||0;r2=e.outerRadius||e.r||0;j=m.createRadialGradient(x,y,r1,x,y,r2)}if(!g){if(isNaN(c)||isNaN(b)||isNaN(l)||isNaN(h)){c=0;l=0;b=k?0:m.canvas.width;h=k?m.canvas.height:0}j=m.createLinearGradient(c,l,b,h)}var d=this._gradients[e.fill].colorStops;for(var f=0;f<d.length;f++){j.addColorStop(d[f].percent,d[f].color)}m.fillStyle=j}else{if(e.fill){m.fillStyle=e.fill}}},rect:function(b,c){b.fillRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height);b.strokeRect(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.width,c.height)},circle:function(b,c){if(c.r==0){return}b.beginPath();b.arc(a.jqx.ptrnd(c.x),a.jqx.ptrnd(c.y),c.r,0,Math.PI*2,false);b.closePath();b.fill();b.stroke()},_parsePoint:function(c){var b=this._parseNumber(c);var d=this._parseNumber(c);return({x:b,y:d})},_parseNumber:function(d){var e=false;for(var b=this._pos;b<d.length;b++){if((d[b]>="0"&&d[b]<="9")||d[b]=="."||(d[b]=="-"&&!e)){e=true;continue}if(!e&&(d[b]==" "||d[b]==",")){this._pos++;continue}break}var c=parseFloat(d.substring(this._pos,b));if(isNaN(c)){return undefined}this._pos=b;return c},_pos:0,_cmds:"mlcaz",_lastCmd:"",_isRelativeCmd:function(b){return a.jqx.string.contains(this._cmds,b)},_parseCmd:function(b){for(var c=this._pos;c<b.length;c++){if(a.jqx.string.containsIgnoreCase(this._cmds,b[c])){this._pos=c+1;this._lastCmd=b[c];return this._lastCmd}if(b[c]==" "){this._pos++;continue}if(b[c]>="0"&&b[c]<="9"){this._pos=c;if(this._lastCmd==""){break}else{return this._lastCmd}}}return undefined},_toAbsolutePoint:function(b){return{x:this._currentPoint.x+b.x,y:this._currentPoint.y+b.y}},_currentPoint:{x:0,y:0},path:function(C,L){var z=L.d;this._pos=0;this._lastCmd="";var k=undefined;this._currentPoint={x:0,y:0};C.beginPath();var G=0;while(this._pos<z.length){var F=this._parseCmd(z);if(F==undefined){break}if(F=="M"||F=="m"){var D=this._parsePoint(z);if(D==undefined){break}C.moveTo(D.x,D.y);this._currentPoint=D;if(k==undefined){k=D}continue}if(F=="L"||F=="l"){var D=this._parsePoint(z);if(D==undefined){break}C.lineTo(D.x,D.y);this._currentPoint=D;continue}if(F=="A"||F=="a"){var g=this._parseNumber(z);var f=this._parseNumber(z);var J=this._parseNumber(z)*(Math.PI/180);var N=this._parseNumber(z);var e=this._parseNumber(z);var o=this._parsePoint(z);if(this._isRelativeCmd(F)){o=this._toAbsolutePoint(o)}if(g==0||f==0){continue}var h=this._currentPoint;var I={x:Math.cos(J)*(h.x-o.x)/2+Math.sin(J)*(h.y-o.y)/2,y:-Math.sin(J)*(h.x-o.x)/2+Math.cos(J)*(h.y-o.y)/2};var j=Math.pow(I.x,2)/Math.pow(g,2)+Math.pow(I.y,2)/Math.pow(f,2);if(j>1){g*=Math.sqrt(j);f*=Math.sqrt(j)}var p=(N==e?-1:1)*Math.sqrt(((Math.pow(g,2)*Math.pow(f,2))-(Math.pow(g,2)*Math.pow(I.y,2))-(Math.pow(f,2)*Math.pow(I.x,2)))/(Math.pow(g,2)*Math.pow(I.y,2)+Math.pow(f,2)*Math.pow(I.x,2)));if(isNaN(p)){p=0}var H={x:p*g*I.y/f,y:p*-f*I.x/g};var B={x:(h.x+o.x)/2+Math.cos(J)*H.x-Math.sin(J)*H.y,y:(h.y+o.y)/2+Math.sin(J)*H.x+Math.cos(J)*H.y};var A=function(i){return Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))};var t=function(m,i){return(m[0]*i[0]+m[1]*i[1])/(A(m)*A(i))};var M=function(m,i){return(m[0]*i[1]<m[1]*i[0]?-1:1)*Math.acos(t(m,i))};var E=M([1,0],[(I.x-H.x)/g,(I.y-H.y)/f]);var n=[(I.x-H.x)/g,(I.y-H.y)/f];var l=[(-I.x-H.x)/g,(-I.y-H.y)/f];var K=M(n,l);if(t(n,l)<=-1){K=Math.PI}if(t(n,l)>=1){K=0}if(e==0&&K>0){K=K-2*Math.PI}if(e==1&&K<0){K=K+2*Math.PI}var t=(g>f)?g:f;var w=(g>f)?1:g/f;var q=(g>f)?f/g:1;C.translate(B.x,B.y);C.rotate(J);C.scale(w,q);C.arc(0,0,t,E,E+K,1-e);C.scale(1/w,1/q);C.rotate(-J);C.translate(-B.x,-B.y);continue}if((F=="Z"||F=="z")&&k!=undefined){C.lineTo(k.x,k.y);this._currentPoint=k;continue}if(F=="C"||F=="c"){var d=this._parsePoint(z);var c=this._parsePoint(z);var b=this._parsePoint(z);C.bezierCurveTo(d.x,d.y,c.x,c.y,b.x,b.y);this._currentPoint=b;continue}}C.fill();C.stroke();C.closePath()},text:function(q,v){var k=a.jqx.ptrnd(v.x);var i=a.jqx.ptrnd(v.y);var o=a.jqx.ptrnd(v.width);var n=a.jqx.ptrnd(v.height);var m=v.halign;var d=v.valign;var t=v.angle;var u=v.clip||true;q.save();if(!m){m="center"}if(!d){d="center"}if(u){q.rect(k-2,i-2,o+5,n+5);q.clip()}var z=v.textWidth;var f=v.textHeight;var l=o||0;var r=n||0;q.fillStyle=v.color;q.font=v.fontWeight+" "+v.fontSize+" "+v.fontFamily;if(!t||t==0){if(m=="center"){k+=(l-z)/2}else{if(m=="right"){k+=(l-z)}}i+=f;if(d=="center"){i+=(r-f)/2}else{if(d=="bottom"){i+=r-f}}if(!o){o=z}if(!n){n=f}q.fillText(v.text,k,i);q.restore();return}var c=t*Math.PI*2/360;var s=Math.sin(c);var e=Math.cos(c);var g=f*e+z*s;var j=z*e+f*s;var p=i;var b=k;k+=(o-j)/2;i+=(n-g)/2;i+=f*e;if(m=="left"){if(e>0){k=b;if(s<0){k-=s*f}}else{k=b-e*z;if(s<0){k-=s*f}}}else{if(m=="right"){if(e>0){k=b+o-j;if(s<0){k+=s*f}}else{k=b+o;if(s>=0){k-=s*f}}}}if(d=="top"){if(s<0){i=p-s*z;if(e>0){i+=e*f}}else{i=p;if(e>0){i=p+f*e}}}else{if(d=="bottom"){if(s<0){i=p+n;if(e<=0){i+=f*e}}else{i=p+n-z*s;if(e<0){i+=f*e}}}}k=a.jqx._rup(k);i=a.jqx._rup(i);q.translate(k,i);q.rotate(c);q.fillText(v.text,0,0);q.restore()}},refresh:function(){this.ctx.clearRect(0,0,this.canvas[0].width,this.canvas[0].height);for(var b in this._elements){var c=this._elements[b];this._renderers.setFillStyle(this.ctx,c);this._renderers.setStroke(this.ctx,c);this._renderers[this._elements[b].type](this.ctx,c)}}}})(jQuery);